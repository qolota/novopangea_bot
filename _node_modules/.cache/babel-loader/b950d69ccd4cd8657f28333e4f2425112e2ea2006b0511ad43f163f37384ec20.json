{"ast":null,"code":"import _regeneratorRuntime from\"/Users/germangurov/projects/wax_bot/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/germangurov/projects/wax_bot/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var fetchWithAttempts=require('../utils/fetchWithAttempts');var _require=require('../configs/ENDPOINTS'),WAX_BLOCKS_PROVIDER=_require.WAX_BLOCKS_PROVIDER;var fetchWaxData2=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref){var params,ignoreHttpErrorStatuses,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:params=_ref.params,ignoreHttpErrorStatuses=_ref.ignoreHttpErrorStatuses;_context.next=3;return fetchWithAttempts({url:\"\".concat(WAX_BLOCKS_PROVIDER,\"/v1/chain/get_table_rows\"),options:{headers:{\"accept\":\"*/*\"},body:JSON.stringify(params),method:'POST'},retries:3,ignoreHttpErrorStatuses:ignoreHttpErrorStatuses});case 3:data=_context.sent;if(!(data==null)){_context.next=6;break;}return _context.abrupt(\"return\",null);case 6:if(!(data.code==='ignore_http_status')){_context.next=8;break;}return _context.abrupt(\"return\",data);case 8:return _context.abrupt(\"return\",{nextKey:data.next_key===''?null:data.next_key,rows:data.rows});case 9:case\"end\":return _context.stop();}},_callee);}));return function fetchWaxData2(_x){return _ref2.apply(this,arguments);};}();module.exports=fetchWaxData2;","map":{"version":3,"names":["fetchWithAttempts","require","_require","WAX_BLOCKS_PROVIDER","fetchWaxData2","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","params","ignoreHttpErrorStatuses","data","wrap","_callee$","_context","prev","next","url","concat","options","headers","body","JSON","stringify","method","retries","sent","abrupt","code","nextKey","next_key","rows","stop","_x","apply","arguments","module","exports"],"sources":["/Users/germangurov/projects/wax_bot/src/core/fetchWaxData2.js"],"sourcesContent":["const fetchWithAttempts = require('../utils/fetchWithAttempts');\nconst {WAX_BLOCKS_PROVIDER} = require('../configs/ENDPOINTS');\n\nconst fetchWaxData2 = async ({\n  params,\n  ignoreHttpErrorStatuses,\n}) => {\n    const data = await fetchWithAttempts({\n      url: `${WAX_BLOCKS_PROVIDER}/v1/chain/get_table_rows`,\n      options: {\n        headers: {\n          \"accept\": \"*/*\",\n        },\n        body: JSON.stringify(params),\n        method: 'POST',\n      },\n      retries: 3,\n      ignoreHttpErrorStatuses,\n    });\n\n    if (data == null) {\n      return null;\n    }\n\n    if (data.code === 'ignore_http_status') {\n      return data;\n    }\n\n    return {\n        nextKey: data.next_key === ''\n          ? null\n          : data.next_key,\n        rows: data.rows,\n    };\n}\n\nmodule.exports = fetchWaxData2;\n"],"mappings":"kQAAA,GAAM,CAAAA,iBAAiB,CAAGC,OAAO,CAAC,4BAA4B,CAAC,CAC/D,IAAAC,QAAA,CAA8BD,OAAO,CAAC,sBAAsB,CAAC,CAAtDE,mBAAmB,CAAAD,QAAA,CAAnBC,mBAAmB,CAE1B,GAAM,CAAAC,aAAa,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAAC,IAAA,MAAAC,MAAA,CAAAC,uBAAA,CAAAC,IAAA,QAAAN,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACpBP,MAAM,CAAAD,IAAA,CAANC,MAAM,CACNC,uBAAuB,CAAAF,IAAA,CAAvBE,uBAAuB,CAAAI,QAAA,CAAAE,IAAA,SAEF,CAAAlB,iBAAiB,CAAC,CACnCmB,GAAG,IAAAC,MAAA,CAAKjB,mBAAmB,4BAA0B,CACrDkB,OAAO,CAAE,CACPC,OAAO,CAAE,CACP,QAAQ,CAAE,KACZ,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACd,MAAM,CAAC,CAC5Be,MAAM,CAAE,MACV,CAAC,CACDC,OAAO,CAAE,CAAC,CACVf,uBAAuB,CAAvBA,uBACF,CAAC,CAAC,QAXIC,IAAI,CAAAG,QAAA,CAAAY,IAAA,MAaNf,IAAI,EAAI,IAAI,GAAAG,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAa,MAAA,UACP,IAAI,cAGThB,IAAI,CAACiB,IAAI,GAAK,oBAAoB,GAAAd,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAa,MAAA,UAC7BhB,IAAI,gBAAAG,QAAA,CAAAa,MAAA,UAGN,CACHE,OAAO,CAAElB,IAAI,CAACmB,QAAQ,GAAK,EAAE,CACzB,IAAI,CACJnB,IAAI,CAACmB,QAAQ,CACjBC,IAAI,CAAEpB,IAAI,CAACoB,IACf,CAAC,0BAAAjB,QAAA,CAAAkB,IAAA,MAAAzB,OAAA,GACJ,kBA/BK,CAAAL,aAAaA,CAAA+B,EAAA,SAAA9B,KAAA,CAAA+B,KAAA,MAAAC,SAAA,OA+BlB,CAEDC,MAAM,CAACC,OAAO,CAAGnC,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}