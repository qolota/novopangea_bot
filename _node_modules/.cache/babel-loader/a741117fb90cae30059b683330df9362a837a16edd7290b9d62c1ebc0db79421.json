{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultTxVerifier = exports.WaxJS = void 0;\nconst eosjs_1 = require(\"eosjs\");\nconst eosjs_ecc_migration_1 = require(\"eosjs/dist/eosjs-ecc-migration\");\nconst helpers_1 = require(\"./helpers\");\nconst version_1 = require(\"./version\");\nconst WaxSigningApi_1 = require(\"./WaxSigningApi\");\nconst PROOF_WAX = 1;\nconst PROOF_USER = 2;\nclass WaxJS {\n  get userAccount() {\n    return this.user && this.user.account;\n  }\n  get pubKeys() {\n    return this.user && this.user.keys;\n  }\n  get isTemp() {\n    return this.user && this.user.isTemp;\n  }\n  get createInfo() {\n    return this.user && this.user.createData;\n  }\n  get avatar() {\n    var _a;\n    return (_a = this.user) === null || _a === void 0 ? void 0 : _a.avatarUrl;\n  }\n  get trustScore() {\n    var _a;\n    return (_a = this.user) === null || _a === void 0 ? void 0 : _a.trustScore;\n  }\n  get trustScoreProvider() {\n    return \"https://chainchamps.com\";\n  }\n  get version() {\n    return version_1.version;\n  }\n  get proofVerified() {\n    var _a;\n    return (_a = this.user) === null || _a === void 0 ? void 0 : _a.isProofVerified;\n  }\n  constructor({\n    rpcEndpoint,\n    tryAutoLogin = true,\n    userAccount,\n    pubKeys,\n    apiSigner,\n    waxSigningURL = \"https://www.mycloudwallet.com\",\n    waxAutoSigningURL = \"https://idm-api.mycloudwallet.com/v1/accounts/auto-accept/\",\n    eosApiArgs = {},\n    freeBandwidth = true,\n    feeFallback = true,\n    verifyTx = defaultTxVerifier,\n    metricURL = \"\",\n    returnTempAccounts = false\n  }) {\n    this.rpc = new eosjs_1.JsonRpc(rpcEndpoint);\n    this.signingApi = new WaxSigningApi_1.WaxSigningApi(waxSigningURL, waxAutoSigningURL, this.rpc, metricURL, returnTempAccounts);\n    this.waxSigningURL = waxSigningURL;\n    this.waxAutoSigningURL = waxAutoSigningURL;\n    this.apiSigner = apiSigner;\n    this.eosApiArgs = eosApiArgs;\n    this.freeBandwidth = freeBandwidth;\n    this.feeFallback = feeFallback;\n    this.metricURL = metricURL;\n    this.verifyTx = verifyTx;\n    this.returnTempAccounts = returnTempAccounts;\n    if (userAccount && Array.isArray(pubKeys)) {\n      // login from constructor\n      this.receiveLogin({\n        account: userAccount,\n        keys: pubKeys\n      });\n    } else {\n      // try to auto-login via endpoint\n      if (tryAutoLogin) {\n        this.signingApi.tryAutologin().then(response => __awaiter(this, void 0, void 0, function* () {\n          if (response) {\n            this.receiveLogin(yield this.signingApi.login());\n          }\n        }));\n      }\n    }\n  }\n  login(nonce) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (!this.user) {\n        this.receiveLogin(yield this.signingApi.login(nonce));\n      }\n      return this.user.account;\n    });\n  }\n  isAutoLoginAvailable() {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (this.user) {\n        return true;\n      } else if (yield this.signingApi.tryAutologin()) {\n        this.receiveLogin(yield this.signingApi.login());\n        return true;\n      }\n      return false;\n    });\n  }\n  logout() {\n    return __awaiter(this, void 0, void 0, function* () {\n      this.user = null;\n      this.api = null;\n      if (this.signingApi) {\n        this.signingApi.logout();\n      }\n    });\n  }\n  userAccountProof(nonce, description, verify = true) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (!this.user) {\n        throw new Error(\"User is not logged in\");\n      }\n      const data = yield this.signingApi.proofWindow(nonce, PROOF_USER, description);\n      const message = nonce;\n      if (!verify) {\n        return Object.assign(Object.assign({}, data), {\n          message\n        });\n      }\n      for (const key of this.pubKeys) {\n        if (eosjs_ecc_migration_1.ecc.verify(data.signature, message, key)) {\n          return true;\n        }\n      }\n      return false;\n    });\n  }\n  waxProof(nonce, verify = true) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (!this.user) {\n        throw new Error(\"User is not logged in\");\n      }\n      const data = yield this.signingApi.proofWindow(nonce, PROOF_WAX, null);\n      const message = `cloudwallet-verification-${data.referer}-${nonce}-${data.accountName}`;\n      if (!verify) {\n        return Object.assign(Object.assign({}, data), {\n          message\n        });\n      }\n      return eosjs_ecc_migration_1.ecc.verify(data.signature, message, yield (0, helpers_1.getProofWaxRequiredKeys)(this.rpc.endpoint));\n    });\n  }\n  receiveLogin(data) {\n    this.user = data;\n    const signatureProvider = {\n      getAvailableKeys: () => __awaiter(this, void 0, void 0, function* () {\n        return [...this.user.keys, ...(this.apiSigner && (yield this.apiSigner.getAvailableKeys()) || [])];\n      }),\n      sign: sigArgs => __awaiter(this, void 0, void 0, function* () {\n        const originalTx = yield this.api.deserializeTransactionWithActions(sigArgs.serializedTransaction);\n        const {\n          serializedTransaction,\n          signatures\n        } = yield this.signingApi.signing(originalTx, sigArgs.serializedTransaction, !this.freeBandwidth, this.feeFallback);\n        const augmentedTx = yield this.api.deserializeTransactionWithActions(serializedTransaction);\n        this.verifyTx(this.user, originalTx, augmentedTx);\n        sigArgs.serializedTransaction = serializedTransaction;\n        return {\n          serializedTransaction,\n          signatures: [...signatures, ...(this.apiSigner && (yield this.apiSigner.sign(sigArgs)).signatures || [])]\n        };\n      })\n    };\n    this.api = new eosjs_1.Api(Object.assign(Object.assign({}, this.eosApiArgs), {\n      rpc: this.rpc,\n      signatureProvider\n    }));\n    const transact = this.api.transact.bind(this.api);\n    // We monkeypatch the transact method to overcome timeouts\n    // firing the pop-up which some browsers enforce, such as Safari.\n    // By pre-creating the pop-up window we will interact with,\n    // we ensure that it is not going to be rejected due to a delayed\n    // pop up that would otherwise occur post transaction creation\n    this.api.transact = (transaction, namedParams) => __awaiter(this, void 0, void 0, function* () {\n      yield this.signingApi.prepareTransaction(transaction);\n      return yield transact(transaction, namedParams);\n    });\n  }\n}\nexports.WaxJS = WaxJS;\nfunction defaultTxVerifier(user, originalTx, augmentedTx) {\n  const {\n    actions: originalActions\n  } = originalTx;\n  const {\n    actions: augmentedActions\n  } = augmentedTx;\n  if (JSON.stringify(originalActions) !== JSON.stringify(augmentedActions.slice(augmentedActions.length - originalActions.length))) {\n    throw new Error(`Augmented transaction actions has modified actions from the original.\\nOriginal: ${JSON.stringify(originalActions, undefined, 2)}\\nAugmented: ${JSON.stringify(augmentedActions, undefined, 2)}`);\n  }\n  for (const extraAction of augmentedActions.slice(0, augmentedActions.length - originalActions.length)) {\n    const userAuthedAction = extraAction.authorization.find(auth => {\n      return auth.actor === user.account;\n    });\n    if (userAuthedAction) {\n      if (extraAction.account === \"eosio.token\" && extraAction.name === \"transfer\") {\n        const noopAction = augmentedActions[0];\n        if (extraAction.data.to === \"txfee.wax\" && extraAction.data.memo.startsWith(\"WAX fee for \") && JSON.stringify(noopAction) === JSON.stringify({\n          account: \"boost.wax\",\n          name: \"noop\",\n          authorization: [{\n            actor: \"boost.wax\",\n            permission: \"paybw\"\n          }],\n          data: {}\n        })) {\n          continue;\n        }\n      }\n      if (extraAction.account === \"eosio\" && extraAction.name === \"buyrambytes\") {\n        if (extraAction.data.receiver === user.account) {\n          continue;\n        }\n      }\n      throw new Error(`Augmented transaction actions has an extra action from the original authorizing the user.\\nOriginal: ${JSON.stringify(originalActions, undefined, 2)}\\nAugmented: ${JSON.stringify(augmentedActions, undefined, 2)}`);\n    }\n  }\n}\nexports.defaultTxVerifier = defaultTxVerifier;","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","defaultTxVerifier","WaxJS","eosjs_1","require","eosjs_ecc_migration_1","helpers_1","version_1","WaxSigningApi_1","PROOF_WAX","PROOF_USER","userAccount","user","account","pubKeys","keys","isTemp","createInfo","createData","avatar","_a","avatarUrl","trustScore","trustScoreProvider","version","proofVerified","isProofVerified","constructor","rpcEndpoint","tryAutoLogin","apiSigner","waxSigningURL","waxAutoSigningURL","eosApiArgs","freeBandwidth","feeFallback","verifyTx","metricURL","returnTempAccounts","rpc","JsonRpc","signingApi","WaxSigningApi","Array","isArray","receiveLogin","tryAutologin","response","login","nonce","isAutoLoginAvailable","logout","api","userAccountProof","description","verify","Error","data","proofWindow","message","assign","key","ecc","signature","waxProof","referer","accountName","getProofWaxRequiredKeys","endpoint","signatureProvider","getAvailableKeys","sign","sigArgs","originalTx","deserializeTransactionWithActions","serializedTransaction","signatures","signing","augmentedTx","Api","transact","bind","transaction","namedParams","prepareTransaction","actions","originalActions","augmentedActions","JSON","stringify","slice","length","undefined","extraAction","userAuthedAction","authorization","find","auth","actor","name","noopAction","to","memo","startsWith","permission","receiver"],"sources":["/Users/germangurov/projects/wax_bot/node_modules/@waxio/waxjs/dist/index.js"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaultTxVerifier = exports.WaxJS = void 0;\nconst eosjs_1 = require(\"eosjs\");\nconst eosjs_ecc_migration_1 = require(\"eosjs/dist/eosjs-ecc-migration\");\nconst helpers_1 = require(\"./helpers\");\nconst version_1 = require(\"./version\");\nconst WaxSigningApi_1 = require(\"./WaxSigningApi\");\nconst PROOF_WAX = 1;\nconst PROOF_USER = 2;\nclass WaxJS {\n    get userAccount() {\n        return this.user && this.user.account;\n    }\n    get pubKeys() {\n        return this.user && this.user.keys;\n    }\n    get isTemp() {\n        return this.user && this.user.isTemp;\n    }\n    get createInfo() {\n        return this.user && this.user.createData;\n    }\n    get avatar() {\n        var _a;\n        return (_a = this.user) === null || _a === void 0 ? void 0 : _a.avatarUrl;\n    }\n    get trustScore() {\n        var _a;\n        return (_a = this.user) === null || _a === void 0 ? void 0 : _a.trustScore;\n    }\n    get trustScoreProvider() {\n        return \"https://chainchamps.com\";\n    }\n    get version() {\n        return version_1.version;\n    }\n    get proofVerified() {\n        var _a;\n        return (_a = this.user) === null || _a === void 0 ? void 0 : _a.isProofVerified;\n    }\n    constructor({ rpcEndpoint, tryAutoLogin = true, userAccount, pubKeys, apiSigner, waxSigningURL = \"https://www.mycloudwallet.com\", waxAutoSigningURL = \"https://idm-api.mycloudwallet.com/v1/accounts/auto-accept/\", eosApiArgs = {}, freeBandwidth = true, feeFallback = true, verifyTx = defaultTxVerifier, metricURL = \"\", returnTempAccounts = false, }) {\n        this.rpc = new eosjs_1.JsonRpc(rpcEndpoint);\n        this.signingApi = new WaxSigningApi_1.WaxSigningApi(waxSigningURL, waxAutoSigningURL, this.rpc, metricURL, returnTempAccounts);\n        this.waxSigningURL = waxSigningURL;\n        this.waxAutoSigningURL = waxAutoSigningURL;\n        this.apiSigner = apiSigner;\n        this.eosApiArgs = eosApiArgs;\n        this.freeBandwidth = freeBandwidth;\n        this.feeFallback = feeFallback;\n        this.metricURL = metricURL;\n        this.verifyTx = verifyTx;\n        this.returnTempAccounts = returnTempAccounts;\n        if (userAccount && Array.isArray(pubKeys)) {\n            // login from constructor\n            this.receiveLogin({ account: userAccount, keys: pubKeys });\n        }\n        else {\n            // try to auto-login via endpoint\n            if (tryAutoLogin) {\n                this.signingApi.tryAutologin().then((response) => __awaiter(this, void 0, void 0, function* () {\n                    if (response) {\n                        this.receiveLogin(yield this.signingApi.login());\n                    }\n                }));\n            }\n        }\n    }\n    login(nonce) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.user) {\n                this.receiveLogin(yield this.signingApi.login(nonce));\n            }\n            return this.user.account;\n        });\n    }\n    isAutoLoginAvailable() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.user) {\n                return true;\n            }\n            else if (yield this.signingApi.tryAutologin()) {\n                this.receiveLogin(yield this.signingApi.login());\n                return true;\n            }\n            return false;\n        });\n    }\n    logout() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.user = null;\n            this.api = null;\n            if (this.signingApi) {\n                this.signingApi.logout();\n            }\n        });\n    }\n    userAccountProof(nonce, description, verify = true) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.user) {\n                throw new Error(\"User is not logged in\");\n            }\n            const data = yield this.signingApi.proofWindow(nonce, PROOF_USER, description);\n            const message = nonce;\n            if (!verify) {\n                return Object.assign(Object.assign({}, data), { message });\n            }\n            for (const key of this.pubKeys) {\n                if (eosjs_ecc_migration_1.ecc.verify(data.signature, message, key)) {\n                    return true;\n                }\n            }\n            return false;\n        });\n    }\n    waxProof(nonce, verify = true) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.user) {\n                throw new Error(\"User is not logged in\");\n            }\n            const data = yield this.signingApi.proofWindow(nonce, PROOF_WAX, null);\n            const message = `cloudwallet-verification-${data.referer}-${nonce}-${data.accountName}`;\n            if (!verify) {\n                return Object.assign(Object.assign({}, data), { message });\n            }\n            return eosjs_ecc_migration_1.ecc.verify(data.signature, message, yield (0, helpers_1.getProofWaxRequiredKeys)(this.rpc.endpoint));\n        });\n    }\n    receiveLogin(data) {\n        this.user = data;\n        const signatureProvider = {\n            getAvailableKeys: () => __awaiter(this, void 0, void 0, function* () {\n                return [\n                    ...this.user.keys,\n                    ...((this.apiSigner && (yield this.apiSigner.getAvailableKeys())) ||\n                        []),\n                ];\n            }),\n            sign: (sigArgs) => __awaiter(this, void 0, void 0, function* () {\n                const originalTx = yield this.api.deserializeTransactionWithActions(sigArgs.serializedTransaction);\n                const { serializedTransaction, signatures } = yield this.signingApi.signing(originalTx, sigArgs.serializedTransaction, !this.freeBandwidth, this.feeFallback);\n                const augmentedTx = yield this.api.deserializeTransactionWithActions(serializedTransaction);\n                this.verifyTx(this.user, originalTx, augmentedTx);\n                sigArgs.serializedTransaction = serializedTransaction;\n                return {\n                    serializedTransaction,\n                    signatures: [\n                        ...signatures,\n                        ...((this.apiSigner &&\n                            (yield this.apiSigner.sign(sigArgs)).signatures) ||\n                            []),\n                    ],\n                };\n            }),\n        };\n        this.api = new eosjs_1.Api(Object.assign(Object.assign({}, this.eosApiArgs), { rpc: this.rpc, signatureProvider }));\n        const transact = this.api.transact.bind(this.api);\n        // We monkeypatch the transact method to overcome timeouts\n        // firing the pop-up which some browsers enforce, such as Safari.\n        // By pre-creating the pop-up window we will interact with,\n        // we ensure that it is not going to be rejected due to a delayed\n        // pop up that would otherwise occur post transaction creation\n        this.api.transact = (transaction, namedParams) => __awaiter(this, void 0, void 0, function* () {\n            yield this.signingApi.prepareTransaction(transaction);\n            return yield transact(transaction, namedParams);\n        });\n    }\n}\nexports.WaxJS = WaxJS;\nfunction defaultTxVerifier(user, originalTx, augmentedTx) {\n    const { actions: originalActions } = originalTx;\n    const { actions: augmentedActions } = augmentedTx;\n    if (JSON.stringify(originalActions) !==\n        JSON.stringify(augmentedActions.slice(augmentedActions.length - originalActions.length))) {\n        throw new Error(`Augmented transaction actions has modified actions from the original.\\nOriginal: ${JSON.stringify(originalActions, undefined, 2)}\\nAugmented: ${JSON.stringify(augmentedActions, undefined, 2)}`);\n    }\n    for (const extraAction of augmentedActions.slice(0, augmentedActions.length - originalActions.length)) {\n        const userAuthedAction = extraAction.authorization.find((auth) => {\n            return auth.actor === user.account;\n        });\n        if (userAuthedAction) {\n            if (extraAction.account === \"eosio.token\" &&\n                extraAction.name === \"transfer\") {\n                const noopAction = augmentedActions[0];\n                if (extraAction.data.to === \"txfee.wax\" &&\n                    extraAction.data.memo.startsWith(\"WAX fee for \") &&\n                    JSON.stringify(noopAction) ===\n                        JSON.stringify({\n                            account: \"boost.wax\",\n                            name: \"noop\",\n                            authorization: [\n                                {\n                                    actor: \"boost.wax\",\n                                    permission: \"paybw\",\n                                },\n                            ],\n                            data: {},\n                        })) {\n                    continue;\n                }\n            }\n            if (extraAction.account === \"eosio\" &&\n                extraAction.name === \"buyrambytes\") {\n                if (extraAction.data.receiver === user.account) {\n                    continue;\n                }\n            }\n            throw new Error(`Augmented transaction actions has an extra action from the original authorizing the user.\\nOriginal: ${JSON.stringify(originalActions, undefined, 2)}\\nAugmented: ${JSON.stringify(augmentedActions, undefined, 2)}`);\n        }\n    }\n}\nexports.defaultTxVerifier = defaultTxVerifier;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}