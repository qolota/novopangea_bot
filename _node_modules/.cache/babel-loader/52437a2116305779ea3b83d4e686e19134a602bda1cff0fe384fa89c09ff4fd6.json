{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst SchemaError_1 = __importDefault(require(\"../Errors/SchemaError\"));\nconst Binary_1 = require(\"../Serialization/Binary\");\nclass MappingSchema {\n  constructor(attributes) {\n    this.attributes = attributes;\n    this.reserved = 4;\n  }\n  deserialize(state, upwardsCompatible = false) {\n    const object = {};\n    while (state.position < state.data.length) {\n      const identifier = (0, Binary_1.varint_decode)(state);\n      if (identifier.equals(0)) {\n        break;\n      }\n      const attribute = this.getAttribute(identifier.toJSNumber(), !upwardsCompatible);\n      if (attribute) {\n        object[attribute.name] = attribute.value.deserialize(state);\n      }\n    }\n    return object;\n  }\n  serialize(object) {\n    const data = [];\n    for (let i = 0; i < this.attributes.length; i++) {\n      const attribute = this.attributes[i];\n      if (typeof object[attribute.name] === 'undefined') {\n        continue;\n      }\n      data.push((0, Binary_1.varint_encode)(i + this.reserved));\n      data.push(attribute.value.serialize(object[attribute.name]));\n    }\n    data.push((0, Binary_1.varint_encode)(0));\n    return (0, Binary_1.concat_byte_arrays)(data);\n  }\n  getAttribute(identifier, throwError = true) {\n    const attributeID = identifier - this.reserved;\n    if (attributeID >= this.attributes.length) {\n      if (throwError) {\n        throw new SchemaError_1.default('attribute does not exists');\n      }\n      return;\n    }\n    return this.attributes[Number(attributeID)];\n  }\n}\nexports.default = MappingSchema;","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","SchemaError_1","require","Binary_1","MappingSchema","constructor","attributes","reserved","deserialize","state","upwardsCompatible","object","position","data","length","identifier","varint_decode","equals","attribute","getAttribute","toJSNumber","name","serialize","i","push","varint_encode","concat_byte_arrays","throwError","attributeID","default","Number"],"sources":["/Users/germangurov/projects/wax_bot/node_modules/atomicassets/build/Schema/MappingSchema.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst SchemaError_1 = __importDefault(require(\"../Errors/SchemaError\"));\nconst Binary_1 = require(\"../Serialization/Binary\");\nclass MappingSchema {\n    constructor(attributes) {\n        this.attributes = attributes;\n        this.reserved = 4;\n    }\n    deserialize(state, upwardsCompatible = false) {\n        const object = {};\n        while (state.position < state.data.length) {\n            const identifier = (0, Binary_1.varint_decode)(state);\n            if (identifier.equals(0)) {\n                break;\n            }\n            const attribute = this.getAttribute(identifier.toJSNumber(), !upwardsCompatible);\n            if (attribute) {\n                object[attribute.name] = attribute.value.deserialize(state);\n            }\n        }\n        return object;\n    }\n    serialize(object) {\n        const data = [];\n        for (let i = 0; i < this.attributes.length; i++) {\n            const attribute = this.attributes[i];\n            if (typeof object[attribute.name] === 'undefined') {\n                continue;\n            }\n            data.push((0, Binary_1.varint_encode)(i + this.reserved));\n            data.push(attribute.value.serialize(object[attribute.name]));\n        }\n        data.push((0, Binary_1.varint_encode)(0));\n        return (0, Binary_1.concat_byte_arrays)(data);\n    }\n    getAttribute(identifier, throwError = true) {\n        const attributeID = identifier - this.reserved;\n        if (attributeID >= this.attributes.length) {\n            if (throwError) {\n                throw new SchemaError_1.default('attribute does not exists');\n            }\n            return;\n        }\n        return this.attributes[Number(attributeID)];\n    }\n}\nexports.default = MappingSchema;\n"],"mappings":"AAAA,YAAY;;AACZ,IAAIA,eAAe,GAAI,IAAI,IAAI,IAAI,CAACA,eAAe,IAAK,UAAUC,GAAG,EAAE;EACnE,OAAQA,GAAG,IAAIA,GAAG,CAACC,UAAU,GAAID,GAAG,GAAG;IAAE,SAAS,EAAEA;EAAI,CAAC;AAC7D,CAAC;AACDE,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7D,MAAMC,aAAa,GAAGP,eAAe,CAACQ,OAAO,CAAC,uBAAuB,CAAC,CAAC;AACvE,MAAMC,QAAQ,GAAGD,OAAO,CAAC,yBAAyB,CAAC;AACnD,MAAME,aAAa,CAAC;EAChBC,WAAWA,CAACC,UAAU,EAAE;IACpB,IAAI,CAACA,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACC,QAAQ,GAAG,CAAC;EACrB;EACAC,WAAWA,CAACC,KAAK,EAAEC,iBAAiB,GAAG,KAAK,EAAE;IAC1C,MAAMC,MAAM,GAAG,CAAC,CAAC;IACjB,OAAOF,KAAK,CAACG,QAAQ,GAAGH,KAAK,CAACI,IAAI,CAACC,MAAM,EAAE;MACvC,MAAMC,UAAU,GAAG,CAAC,CAAC,EAAEZ,QAAQ,CAACa,aAAa,EAAEP,KAAK,CAAC;MACrD,IAAIM,UAAU,CAACE,MAAM,CAAC,CAAC,CAAC,EAAE;QACtB;MACJ;MACA,MAAMC,SAAS,GAAG,IAAI,CAACC,YAAY,CAACJ,UAAU,CAACK,UAAU,CAAC,CAAC,EAAE,CAACV,iBAAiB,CAAC;MAChF,IAAIQ,SAAS,EAAE;QACXP,MAAM,CAACO,SAAS,CAACG,IAAI,CAAC,GAAGH,SAAS,CAAClB,KAAK,CAACQ,WAAW,CAACC,KAAK,CAAC;MAC/D;IACJ;IACA,OAAOE,MAAM;EACjB;EACAW,SAASA,CAACX,MAAM,EAAE;IACd,MAAME,IAAI,GAAG,EAAE;IACf,KAAK,IAAIU,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACjB,UAAU,CAACQ,MAAM,EAAES,CAAC,EAAE,EAAE;MAC7C,MAAML,SAAS,GAAG,IAAI,CAACZ,UAAU,CAACiB,CAAC,CAAC;MACpC,IAAI,OAAOZ,MAAM,CAACO,SAAS,CAACG,IAAI,CAAC,KAAK,WAAW,EAAE;QAC/C;MACJ;MACAR,IAAI,CAACW,IAAI,CAAC,CAAC,CAAC,EAAErB,QAAQ,CAACsB,aAAa,EAAEF,CAAC,GAAG,IAAI,CAAChB,QAAQ,CAAC,CAAC;MACzDM,IAAI,CAACW,IAAI,CAACN,SAAS,CAAClB,KAAK,CAACsB,SAAS,CAACX,MAAM,CAACO,SAAS,CAACG,IAAI,CAAC,CAAC,CAAC;IAChE;IACAR,IAAI,CAACW,IAAI,CAAC,CAAC,CAAC,EAAErB,QAAQ,CAACsB,aAAa,EAAE,CAAC,CAAC,CAAC;IACzC,OAAO,CAAC,CAAC,EAAEtB,QAAQ,CAACuB,kBAAkB,EAAEb,IAAI,CAAC;EACjD;EACAM,YAAYA,CAACJ,UAAU,EAAEY,UAAU,GAAG,IAAI,EAAE;IACxC,MAAMC,WAAW,GAAGb,UAAU,GAAG,IAAI,CAACR,QAAQ;IAC9C,IAAIqB,WAAW,IAAI,IAAI,CAACtB,UAAU,CAACQ,MAAM,EAAE;MACvC,IAAIa,UAAU,EAAE;QACZ,MAAM,IAAI1B,aAAa,CAAC4B,OAAO,CAAC,2BAA2B,CAAC;MAChE;MACA;IACJ;IACA,OAAO,IAAI,CAACvB,UAAU,CAACwB,MAAM,CAACF,WAAW,CAAC,CAAC;EAC/C;AACJ;AACA7B,OAAO,CAAC8B,OAAO,GAAGzB,aAAa"},"metadata":{},"sourceType":"script","externalDependencies":[]}