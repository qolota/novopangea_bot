{"ast":null,"code":"const _ = require('lodash');\nconst sumResources = require('./sumResources');\nconst findResource = require('./findResource');\nconst equalizeResources = ({\n  targetResources,\n  currentResources\n}) => {\n  const nTargetResources = sumResources({\n    resources: targetResources\n  });\n  const nCurrentResources = sumResources({\n    resources: currentResources\n  });\n  return _(nTargetResources).map(targetResource => {\n    const currentResource = findResource({\n      resources: nCurrentResources,\n      symbol: targetResource.symbol\n    });\n    if (currentResource == null) {\n      return {\n        ...targetResource\n      };\n    }\n    if (currentResource.value >= targetResource.value) {\n      return {\n        value: 0,\n        symbol: targetResource.symbol\n      };\n    }\n    return {\n      value: _.ceil(targetResource.value - currentResource.value, 4),\n      symbol: targetResource.symbol\n    };\n  }).filter(resource => resource.value > 0).value();\n};\nmodule.exports = equalizeResources;","map":{"version":3,"names":["_","require","sumResources","findResource","equalizeResources","targetResources","currentResources","nTargetResources","resources","nCurrentResources","map","targetResource","currentResource","symbol","value","ceil","filter","resource","module","exports"],"sources":["/Users/germangurov/projects/wax_bot/src/novopangea/utils/equalizeResources.js"],"sourcesContent":["const _ = require('lodash');\nconst sumResources = require('./sumResources');\nconst findResource = require('./findResource');\n\nconst equalizeResources = ({\n    targetResources,\n    currentResources,\n}) => {\n    const nTargetResources = sumResources({\n        resources: targetResources,\n    });\n    const nCurrentResources = sumResources({\n        resources: currentResources,\n    });\n    return _(nTargetResources)\n        .map(targetResource => {\n            const currentResource = findResource({\n                resources: nCurrentResources,\n                symbol: targetResource.symbol\n            });\n\n            if (currentResource == null) {\n                return {\n                    ...targetResource,\n                };\n            }\n\n            if (currentResource.value >= targetResource.value) {\n                return {\n                    value: 0,\n                    symbol: targetResource.symbol,\n                };\n            }\n            \n\n            return {\n                value: _.ceil(targetResource.value - currentResource.value, 4),\n                symbol: targetResource.symbol,\n            }\n        })\n        .filter(resource => resource.value > 0)\n        .value();\n};\n\nmodule.exports = equalizeResources;"],"mappings":"AAAA,MAAMA,CAAC,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAC3B,MAAMC,YAAY,GAAGD,OAAO,CAAC,gBAAgB,CAAC;AAC9C,MAAME,YAAY,GAAGF,OAAO,CAAC,gBAAgB,CAAC;AAE9C,MAAMG,iBAAiB,GAAGA,CAAC;EACvBC,eAAe;EACfC;AACJ,CAAC,KAAK;EACF,MAAMC,gBAAgB,GAAGL,YAAY,CAAC;IAClCM,SAAS,EAAEH;EACf,CAAC,CAAC;EACF,MAAMI,iBAAiB,GAAGP,YAAY,CAAC;IACnCM,SAAS,EAAEF;EACf,CAAC,CAAC;EACF,OAAON,CAAC,CAACO,gBAAgB,CAAC,CACrBG,GAAG,CAACC,cAAc,IAAI;IACnB,MAAMC,eAAe,GAAGT,YAAY,CAAC;MACjCK,SAAS,EAAEC,iBAAiB;MAC5BI,MAAM,EAAEF,cAAc,CAACE;IAC3B,CAAC,CAAC;IAEF,IAAID,eAAe,IAAI,IAAI,EAAE;MACzB,OAAO;QACH,GAAGD;MACP,CAAC;IACL;IAEA,IAAIC,eAAe,CAACE,KAAK,IAAIH,cAAc,CAACG,KAAK,EAAE;MAC/C,OAAO;QACHA,KAAK,EAAE,CAAC;QACRD,MAAM,EAAEF,cAAc,CAACE;MAC3B,CAAC;IACL;IAGA,OAAO;MACHC,KAAK,EAAEd,CAAC,CAACe,IAAI,CAACJ,cAAc,CAACG,KAAK,GAAGF,eAAe,CAACE,KAAK,EAAE,CAAC,CAAC;MAC9DD,MAAM,EAAEF,cAAc,CAACE;IAC3B,CAAC;EACL,CAAC,CAAC,CACDG,MAAM,CAACC,QAAQ,IAAIA,QAAQ,CAACH,KAAK,GAAG,CAAC,CAAC,CACtCA,KAAK,CAAC,CAAC;AAChB,CAAC;AAEDI,MAAM,CAACC,OAAO,GAAGf,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}