{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst BaseCache_1 = require(\"./BaseCache\");\nclass RpcCache {\n  constructor() {\n    this.cache = new BaseCache_1.MemoryCache();\n  }\n  getAsset(assetID, data) {\n    if (data) {\n      data.mutable_serialized_data = new Uint8Array(data.mutable_serialized_data);\n      data.immutable_serialized_data = new Uint8Array(data.immutable_serialized_data);\n    }\n    return this.access('assets', assetID, data);\n  }\n  deleteAsset(assetID) {\n    this.delete('assets', assetID);\n  }\n  getTemplate(collectionName, templateID, data) {\n    if (data) {\n      data.immutable_serialized_data = new Uint8Array(data.immutable_serialized_data);\n    }\n    return this.access('templates', collectionName + ':' + templateID, data);\n  }\n  deleteTemplate(collectionName, templateID) {\n    this.delete('templates', collectionName + ':' + templateID);\n  }\n  getSchema(collectionName, schemaName, data) {\n    return this.access('schemas', collectionName + ':' + schemaName, data);\n  }\n  deleteSchema(collectionName, schemaName) {\n    this.delete('schemas', collectionName + ':' + schemaName);\n  }\n  getCollection(collectionName, data) {\n    return this.access('collections', collectionName, data);\n  }\n  deleteCollection(collectionName) {\n    this.delete('collections', collectionName);\n  }\n  getOffer(offerID, data) {\n    return this.access('offers', offerID, data);\n  }\n  deleteOffer(offerID) {\n    this.delete('offers', offerID);\n  }\n  access(namespace, identifier, data) {\n    if (typeof data === 'undefined') {\n      const cache = this.cache.get(namespace + ':' + identifier);\n      return cache === null ? null : cache;\n    }\n    this.cache.put(namespace + ':' + identifier, data, 15 * 60 * 1000);\n    return data;\n  }\n  delete(namespace, identifier) {\n    this.cache.remove(namespace + ':' + identifier);\n  }\n}\nexports.default = RpcCache;","map":{"version":3,"names":["Object","defineProperty","exports","value","BaseCache_1","require","RpcCache","constructor","cache","MemoryCache","getAsset","assetID","data","mutable_serialized_data","Uint8Array","immutable_serialized_data","access","deleteAsset","delete","getTemplate","collectionName","templateID","deleteTemplate","getSchema","schemaName","deleteSchema","getCollection","deleteCollection","getOffer","offerID","deleteOffer","namespace","identifier","get","put","remove","default"],"sources":["/Users/germangurov/projects/wax_bot/node_modules/atomicassets/build/API/Rpc/RpcCache.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst BaseCache_1 = require(\"./BaseCache\");\nclass RpcCache {\n    constructor() {\n        this.cache = new BaseCache_1.MemoryCache();\n    }\n    getAsset(assetID, data) {\n        if (data) {\n            data.mutable_serialized_data = new Uint8Array(data.mutable_serialized_data);\n            data.immutable_serialized_data = new Uint8Array(data.immutable_serialized_data);\n        }\n        return this.access('assets', assetID, data);\n    }\n    deleteAsset(assetID) {\n        this.delete('assets', assetID);\n    }\n    getTemplate(collectionName, templateID, data) {\n        if (data) {\n            data.immutable_serialized_data = new Uint8Array(data.immutable_serialized_data);\n        }\n        return this.access('templates', collectionName + ':' + templateID, data);\n    }\n    deleteTemplate(collectionName, templateID) {\n        this.delete('templates', collectionName + ':' + templateID);\n    }\n    getSchema(collectionName, schemaName, data) {\n        return this.access('schemas', collectionName + ':' + schemaName, data);\n    }\n    deleteSchema(collectionName, schemaName) {\n        this.delete('schemas', collectionName + ':' + schemaName);\n    }\n    getCollection(collectionName, data) {\n        return this.access('collections', collectionName, data);\n    }\n    deleteCollection(collectionName) {\n        this.delete('collections', collectionName);\n    }\n    getOffer(offerID, data) {\n        return this.access('offers', offerID, data);\n    }\n    deleteOffer(offerID) {\n        this.delete('offers', offerID);\n    }\n    access(namespace, identifier, data) {\n        if (typeof data === 'undefined') {\n            const cache = this.cache.get(namespace + ':' + identifier);\n            return cache === null ? null : cache;\n        }\n        this.cache.put(namespace + ':' + identifier, data, 15 * 60 * 1000);\n        return data;\n    }\n    delete(namespace, identifier) {\n        this.cache.remove(namespace + ':' + identifier);\n    }\n}\nexports.default = RpcCache;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}