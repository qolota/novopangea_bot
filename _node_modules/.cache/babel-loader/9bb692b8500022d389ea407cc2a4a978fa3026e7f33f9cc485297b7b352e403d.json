{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst Serialization_1 = require(\"../../Serialization\");\nconst Collection_1 = __importDefault(require(\"./Collection\"));\nconst Schema_1 = __importDefault(require(\"./Schema\"));\nconst Template_1 = __importDefault(require(\"./Template\"));\nclass RpcAsset {\n  constructor(api, owner, id, data, collection, schema, template, cache = true) {\n    this.api = api;\n    this.owner = owner;\n    this.id = id;\n    this._data = new Promise(async (resolve, reject) => {\n      if (data) {\n        resolve(data);\n      } else {\n        try {\n          resolve(await api.queue.fetchAsset(owner, id, cache));\n        } catch (e) {\n          reject(e);\n        }\n      }\n    });\n    this._template = new Promise(async (resolve, reject) => {\n      if (template) {\n        resolve(template);\n      } else {\n        try {\n          const row = await this._data;\n          if (Number(row.template_id) < 0) {\n            return resolve(null);\n          }\n          resolve(new Template_1.default(api, row.collection_name, row.template_id, undefined, undefined, cache));\n        } catch (e) {\n          reject(e);\n        }\n      }\n    });\n    this._collection = new Promise(async (resolve, reject) => {\n      if (collection) {\n        resolve(collection);\n      } else {\n        try {\n          const row = await this._data;\n          resolve(new Collection_1.default(api, row.collection_name, undefined, cache));\n        } catch (e) {\n          reject(e);\n        }\n      }\n    });\n    this._schema = new Promise(async (resolve, reject) => {\n      if (schema) {\n        resolve(schema);\n      } else {\n        try {\n          const row = await this._data;\n          resolve(new Schema_1.default(api, row.collection_name, row.schema_name, undefined, cache));\n        } catch (e) {\n          reject(e);\n        }\n      }\n    });\n  }\n  async template() {\n    return await this._template;\n  }\n  async collection() {\n    return await this._collection;\n  }\n  async schema() {\n    return await this._schema;\n  }\n  async backedTokens() {\n    return (await this._data).backed_tokens;\n  }\n  async immutableData() {\n    const schema = await this.schema();\n    const row = await this._data;\n    return (0, Serialization_1.deserialize)(row.immutable_serialized_data, await schema.format());\n  }\n  async mutableData() {\n    const schema = await this.schema();\n    const row = await this._data;\n    return (0, Serialization_1.deserialize)(row.mutable_serialized_data, await schema.format());\n  }\n  async data() {\n    const mutableData = await this.mutableData();\n    const immutableData = await this.immutableData();\n    const template = await this.template();\n    const templateData = template ? await template.immutableData() : {};\n    return Object.assign({}, mutableData, immutableData, templateData);\n  }\n  async toObject() {\n    const template = await this.template();\n    const collection = await this.collection();\n    const schema = await this.schema();\n    return {\n      asset_id: this.id,\n      collection: await collection.toObject(),\n      schema: await schema.toObject(),\n      template: template ? await template.toObject() : null,\n      backedTokens: await this.backedTokens(),\n      immutableData: await this.immutableData(),\n      mutableData: await this.mutableData(),\n      data: await this.data()\n    };\n  }\n}\nexports.default = RpcAsset;","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","Serialization_1","require","Collection_1","Schema_1","Template_1","RpcAsset","constructor","api","owner","id","data","collection","schema","template","cache","_data","Promise","resolve","reject","queue","fetchAsset","e","_template","row","Number","template_id","default","collection_name","undefined","_collection","_schema","schema_name","backedTokens","backed_tokens","immutableData","deserialize","immutable_serialized_data","format","mutableData","mutable_serialized_data","templateData","assign","toObject","asset_id"],"sources":["/Users/germangurov/projects/wax_bot/node_modules/atomicassets/build/API/Rpc/Asset.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Serialization_1 = require(\"../../Serialization\");\nconst Collection_1 = __importDefault(require(\"./Collection\"));\nconst Schema_1 = __importDefault(require(\"./Schema\"));\nconst Template_1 = __importDefault(require(\"./Template\"));\nclass RpcAsset {\n    constructor(api, owner, id, data, collection, schema, template, cache = true) {\n        this.api = api;\n        this.owner = owner;\n        this.id = id;\n        this._data = new Promise(async (resolve, reject) => {\n            if (data) {\n                resolve(data);\n            }\n            else {\n                try {\n                    resolve(await api.queue.fetchAsset(owner, id, cache));\n                }\n                catch (e) {\n                    reject(e);\n                }\n            }\n        });\n        this._template = new Promise(async (resolve, reject) => {\n            if (template) {\n                resolve(template);\n            }\n            else {\n                try {\n                    const row = await this._data;\n                    if (Number(row.template_id) < 0) {\n                        return resolve(null);\n                    }\n                    resolve(new Template_1.default(api, row.collection_name, row.template_id, undefined, undefined, cache));\n                }\n                catch (e) {\n                    reject(e);\n                }\n            }\n        });\n        this._collection = new Promise(async (resolve, reject) => {\n            if (collection) {\n                resolve(collection);\n            }\n            else {\n                try {\n                    const row = await this._data;\n                    resolve(new Collection_1.default(api, row.collection_name, undefined, cache));\n                }\n                catch (e) {\n                    reject(e);\n                }\n            }\n        });\n        this._schema = new Promise(async (resolve, reject) => {\n            if (schema) {\n                resolve(schema);\n            }\n            else {\n                try {\n                    const row = await this._data;\n                    resolve(new Schema_1.default(api, row.collection_name, row.schema_name, undefined, cache));\n                }\n                catch (e) {\n                    reject(e);\n                }\n            }\n        });\n    }\n    async template() {\n        return await this._template;\n    }\n    async collection() {\n        return await this._collection;\n    }\n    async schema() {\n        return await this._schema;\n    }\n    async backedTokens() {\n        return (await this._data).backed_tokens;\n    }\n    async immutableData() {\n        const schema = await this.schema();\n        const row = await this._data;\n        return (0, Serialization_1.deserialize)(row.immutable_serialized_data, await schema.format());\n    }\n    async mutableData() {\n        const schema = await this.schema();\n        const row = await this._data;\n        return (0, Serialization_1.deserialize)(row.mutable_serialized_data, await schema.format());\n    }\n    async data() {\n        const mutableData = await this.mutableData();\n        const immutableData = await this.immutableData();\n        const template = await this.template();\n        const templateData = template ? await template.immutableData() : {};\n        return Object.assign({}, mutableData, immutableData, templateData);\n    }\n    async toObject() {\n        const template = await this.template();\n        const collection = await this.collection();\n        const schema = await this.schema();\n        return {\n            asset_id: this.id,\n            collection: await collection.toObject(),\n            schema: await schema.toObject(),\n            template: template ? await template.toObject() : null,\n            backedTokens: await this.backedTokens(),\n            immutableData: await this.immutableData(),\n            mutableData: await this.mutableData(),\n            data: await this.data()\n        };\n    }\n}\nexports.default = RpcAsset;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}