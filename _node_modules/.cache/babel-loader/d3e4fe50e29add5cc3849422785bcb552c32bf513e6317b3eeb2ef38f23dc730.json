{"ast":null,"code":"import _regeneratorRuntime from\"/Users/germangurov/projects/wax_bot/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/germangurov/projects/wax_bot/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var fetchProxies=require('./api/fetchProxies');var fetchVoter=require('./api/fetchVoter');var claimWax=require('./actions/claimWax');var voteProdcuer=require('./actions/voteProducer');var claimWaxRewardCalcNextAction=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref){var accountName,proxies,voter;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:accountName=_ref.accountName;_context.next=3;return fetchProxies();case 3:proxies=_context.sent;_context.next=6;return fetchVoter({accountName:accountName});case 6:voter=_context.sent;if(!(voter.lastClaimTime.getTime()>Date.now()-24*60*60*1000)){_context.next=9;break;}return _context.abrupt(\"return\",{action:'wait',message:'Nothing to claim'});case 9:return _context.abrupt(\"return\",{action:'claim_and_vote',actions:[voteProdcuer({accountName:accountName,proxyName:proxies[0].account}),claimWax({accountName:accountName})]});case 10:case\"end\":return _context.stop();}},_callee);}));return function claimWaxRewardCalcNextAction(_x){return _ref2.apply(this,arguments);};}();export default claimWaxRewardCalcNextAction;","map":{"version":3,"names":["fetchProxies","require","fetchVoter","claimWax","voteProdcuer","claimWaxRewardCalcNextAction","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","accountName","proxies","voter","wrap","_callee$","_context","prev","next","sent","lastClaimTime","getTime","Date","now","abrupt","action","message","actions","proxyName","account","stop","_x","apply","arguments"],"sources":["/Users/germangurov/projects/wax_bot/src/core/claimWaxRewardCalcNextAction.js"],"sourcesContent":["const fetchProxies = require('./api/fetchProxies');\nconst fetchVoter = require('./api/fetchVoter');\nconst claimWax = require('./actions/claimWax');\nconst voteProdcuer = require('./actions/voteProducer');\n\nconst claimWaxRewardCalcNextAction = async ({\n    accountName,\n}) => {\n    const proxies = await fetchProxies();\n    const voter = await fetchVoter({\n        accountName,\n    });\n    if (voter.lastClaimTime.getTime() > (Date.now() - 24 * 60 * 60 * 1000)) {\n        return {\n            action: 'wait',\n            message: 'Nothing to claim',\n        }\n    }\n\n    return {\n        action: 'claim_and_vote',\n        actions: [\n            voteProdcuer({\n                accountName,\n                proxyName: proxies[0].account,\n            }),\n            claimWax({\n                accountName,\n            }),\n        ],\n    };\n};\n\nexport default claimWaxRewardCalcNextAction;"],"mappings":"kQAAA,GAAM,CAAAA,YAAY,CAAGC,OAAO,CAAC,oBAAoB,CAAC,CAClD,GAAM,CAAAC,UAAU,CAAGD,OAAO,CAAC,kBAAkB,CAAC,CAC9C,GAAM,CAAAE,QAAQ,CAAGF,OAAO,CAAC,oBAAoB,CAAC,CAC9C,GAAM,CAAAG,YAAY,CAAGH,OAAO,CAAC,wBAAwB,CAAC,CAEtD,GAAM,CAAAI,4BAA4B,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAAC,IAAA,MAAAC,WAAA,CAAAC,OAAA,CAAAC,KAAA,QAAAN,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACjCP,WAAW,CAAAD,IAAA,CAAXC,WAAW,CAAAK,QAAA,CAAAE,IAAA,SAEW,CAAAnB,YAAY,CAAC,CAAC,QAA9Ba,OAAO,CAAAI,QAAA,CAAAG,IAAA,CAAAH,QAAA,CAAAE,IAAA,SACO,CAAAjB,UAAU,CAAC,CAC3BU,WAAW,CAAXA,WACJ,CAAC,CAAC,QAFIE,KAAK,CAAAG,QAAA,CAAAG,IAAA,MAGPN,KAAK,CAACO,aAAa,CAACC,OAAO,CAAC,CAAC,CAAIC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAG,EAAE,CAAG,EAAE,CAAG,EAAE,CAAG,IAAK,GAAAP,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAQ,MAAA,UAC3D,CACHC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,kBACb,CAAC,gBAAAV,QAAA,CAAAQ,MAAA,UAGE,CACHC,MAAM,CAAE,gBAAgB,CACxBE,OAAO,CAAE,CACLxB,YAAY,CAAC,CACTQ,WAAW,CAAXA,WAAW,CACXiB,SAAS,CAAEhB,OAAO,CAAC,CAAC,CAAC,CAACiB,OAC1B,CAAC,CAAC,CACF3B,QAAQ,CAAC,CACLS,WAAW,CAAXA,WACJ,CAAC,CAAC,CAEV,CAAC,2BAAAK,QAAA,CAAAc,IAAA,MAAArB,OAAA,GACJ,kBA1BK,CAAAL,4BAA4BA,CAAA2B,EAAA,SAAA1B,KAAA,CAAA2B,KAAA,MAAAC,SAAA,OA0BjC,CAED,cAAe,CAAA7B,4BAA4B"},"metadata":{},"sourceType":"module","externalDependencies":[]}