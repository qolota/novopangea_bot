{"ast":null,"code":"const _ = require('lodash');\nconst fetchMarkets = require('../../alcor/api/fetchMarkets');\nconst fetchNovoPrice = async () => {\n  const markets = await fetchMarkets();\n  const charmMarket = markets['NOVO+tokens.novo'];\n  const pool = _(charmMarket.pools).find(pool => {\n    return _(pool.symbols).map(symbol => symbol.fullTokenName).filter(symbol => symbol === 'WAX+eosio.token').value().length > 0;\n  });\n  if (pool == null) {\n    return null;\n  }\n  const symbol = pool.symbols.find(symbol => symbol.fullTokenName !== 'WAX+eosio.token');\n  if (symbol == null) {\n    return null;\n  }\n  return symbol.price;\n};\nmodule.exports = fetchNovoPrice;","map":{"version":3,"names":["_","require","fetchMarkets","fetchNovoPrice","markets","charmMarket","pool","pools","find","symbols","map","symbol","fullTokenName","filter","value","length","price","module","exports"],"sources":["/Users/germangurov/projects/wax_bot/src/novopangea/api/fetchNovoPrice.js"],"sourcesContent":["const _ = require('lodash');\nconst fetchMarkets = require('../../alcor/api/fetchMarkets');\n\nconst fetchNovoPrice = async () => {\n    const markets = await fetchMarkets();\n    const charmMarket = markets['NOVO+tokens.novo'];\n    const pool = _(charmMarket.pools)\n        .find(pool => {\n            return _(pool.symbols)\n                .map(symbol => symbol.fullTokenName)\n                .filter(symbol => symbol === 'WAX+eosio.token')\n                .value()\n                .length > 0;\n        });\n\n    if (pool == null) {\n        return null;\n    }\n\n    const symbol = pool\n        .symbols\n        .find(symbol => symbol.fullTokenName !== 'WAX+eosio.token');\n\n    if (symbol == null) {\n        return null;\n    }\n\n    return symbol.price;\n};\n\nmodule.exports = fetchNovoPrice;"],"mappings":"AAAA,MAAMA,CAAC,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAC3B,MAAMC,YAAY,GAAGD,OAAO,CAAC,8BAA8B,CAAC;AAE5D,MAAME,cAAc,GAAG,MAAAA,CAAA,KAAY;EAC/B,MAAMC,OAAO,GAAG,MAAMF,YAAY,CAAC,CAAC;EACpC,MAAMG,WAAW,GAAGD,OAAO,CAAC,kBAAkB,CAAC;EAC/C,MAAME,IAAI,GAAGN,CAAC,CAACK,WAAW,CAACE,KAAK,CAAC,CAC5BC,IAAI,CAACF,IAAI,IAAI;IACV,OAAON,CAAC,CAACM,IAAI,CAACG,OAAO,CAAC,CACjBC,GAAG,CAACC,MAAM,IAAIA,MAAM,CAACC,aAAa,CAAC,CACnCC,MAAM,CAACF,MAAM,IAAIA,MAAM,KAAK,iBAAiB,CAAC,CAC9CG,KAAK,CAAC,CAAC,CACPC,MAAM,GAAG,CAAC;EACnB,CAAC,CAAC;EAEN,IAAIT,IAAI,IAAI,IAAI,EAAE;IACd,OAAO,IAAI;EACf;EAEA,MAAMK,MAAM,GAAGL,IAAI,CACdG,OAAO,CACPD,IAAI,CAACG,MAAM,IAAIA,MAAM,CAACC,aAAa,KAAK,iBAAiB,CAAC;EAE/D,IAAID,MAAM,IAAI,IAAI,EAAE;IAChB,OAAO,IAAI;EACf;EAEA,OAAOA,MAAM,CAACK,KAAK;AACvB,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGf,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}