{"ast":null,"code":"import _regeneratorRuntime from\"/Users/germangurov/projects/wax_bot/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/germangurov/projects/wax_bot/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _=require('lodash');var fetchAllWaxData2=require('../fetchAllWaxData2');var CONTRACTS=require('../consts/CONTRACTS');var fetchVoter=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref){var accountName,voters;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:accountName=_ref.accountName;_context.next=3;return fetchAllWaxData2({params:{code:CONTRACTS.WAX,scope:CONTRACTS.WAX,table:\"voters\",lower_bound:accountName,upper_bound:accountName},customProcessor:function customProcessor(_ref3){var row=_ref3.row;return{owner:row.owner,proxy:row.proxy,producers:row.producers,stakedWax:row.staked,unpaidVoteShare:row.unpaid_voteshare,unpaidVoteShareLastUpdated:new Date(\"\".concat(row.unpaid_voteshare_last_updated,\"Z\")),unpaidVoteShareChangeRate:row.unpaid_voteshare_change_rate,lastClaimTime:new Date(\"\".concat(row.last_claim_time,\"Z\")),lastVoteWeight:row.last_vote_weight,proxiedVoteWeight:row.proxied_vote_weight};}});case 3:voters=_context.sent;return _context.abrupt(\"return\",voters[0]);case 5:case\"end\":return _context.stop();}},_callee);}));return function fetchVoter(_x){return _ref2.apply(this,arguments);};}();module.exports=fetchVoter;","map":{"version":3,"names":["_","require","fetchAllWaxData2","CONTRACTS","fetchVoter","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","accountName","voters","wrap","_callee$","_context","prev","next","params","code","WAX","scope","table","lower_bound","upper_bound","customProcessor","_ref3","row","owner","proxy","producers","stakedWax","staked","unpaidVoteShare","unpaid_voteshare","unpaidVoteShareLastUpdated","Date","concat","unpaid_voteshare_last_updated","unpaidVoteShareChangeRate","unpaid_voteshare_change_rate","lastClaimTime","last_claim_time","lastVoteWeight","last_vote_weight","proxiedVoteWeight","proxied_vote_weight","sent","abrupt","stop","_x","apply","arguments","module","exports"],"sources":["/Users/germangurov/projects/wax_bot/src/core/api/fetchVoter.js"],"sourcesContent":["const _ = require('lodash');\nconst fetchAllWaxData2 = require('../fetchAllWaxData2');\nconst CONTRACTS = require('../consts/CONTRACTS');\n\nconst fetchVoter = async ({\n    accountName,\n}) => {\n    const voters = await fetchAllWaxData2({\n        params: {\n            code: CONTRACTS.WAX,\n            scope: CONTRACTS.WAX,\n            table: \"voters\",\n            lower_bound: accountName,\n            upper_bound: accountName,\n        },\n        customProcessor: ({row}) => ({\n            owner: row.owner,\n            proxy: row.proxy,\n            producers: row.producers,\n            stakedWax: row.staked,\n            unpaidVoteShare: row.unpaid_voteshare,\n            unpaidVoteShareLastUpdated: new Date(`${row.unpaid_voteshare_last_updated}Z`),\n            unpaidVoteShareChangeRate: row.unpaid_voteshare_change_rate,\n            lastClaimTime: new Date(`${row.last_claim_time}Z`),\n            lastVoteWeight: row.last_vote_weight,\n            proxiedVoteWeight: row.proxied_vote_weight,\n        }),\n    });\n\n    return voters[0];\n};\n\nmodule.exports = fetchVoter;"],"mappings":"kQAAA,GAAM,CAAAA,CAAC,CAAGC,OAAO,CAAC,QAAQ,CAAC,CAC3B,GAAM,CAAAC,gBAAgB,CAAGD,OAAO,CAAC,qBAAqB,CAAC,CACvD,GAAM,CAAAE,SAAS,CAAGF,OAAO,CAAC,qBAAqB,CAAC,CAEhD,GAAM,CAAAG,UAAU,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAAC,IAAA,MAAAC,WAAA,CAAAC,MAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACfN,WAAW,CAAAD,IAAA,CAAXC,WAAW,CAAAI,QAAA,CAAAE,IAAA,SAEU,CAAAf,gBAAgB,CAAC,CAClCgB,MAAM,CAAE,CACJC,IAAI,CAAEhB,SAAS,CAACiB,GAAG,CACnBC,KAAK,CAAElB,SAAS,CAACiB,GAAG,CACpBE,KAAK,CAAE,QAAQ,CACfC,WAAW,CAAEZ,WAAW,CACxBa,WAAW,CAAEb,WACjB,CAAC,CACDc,eAAe,CAAE,SAAAA,gBAAAC,KAAA,KAAE,CAAAC,GAAG,CAAAD,KAAA,CAAHC,GAAG,OAAO,CACzBC,KAAK,CAAED,GAAG,CAACC,KAAK,CAChBC,KAAK,CAAEF,GAAG,CAACE,KAAK,CAChBC,SAAS,CAAEH,GAAG,CAACG,SAAS,CACxBC,SAAS,CAAEJ,GAAG,CAACK,MAAM,CACrBC,eAAe,CAAEN,GAAG,CAACO,gBAAgB,CACrCC,0BAA0B,CAAE,GAAI,CAAAC,IAAI,IAAAC,MAAA,CAAIV,GAAG,CAACW,6BAA6B,KAAG,CAAC,CAC7EC,yBAAyB,CAAEZ,GAAG,CAACa,4BAA4B,CAC3DC,aAAa,CAAE,GAAI,CAAAL,IAAI,IAAAC,MAAA,CAAIV,GAAG,CAACe,eAAe,KAAG,CAAC,CAClDC,cAAc,CAAEhB,GAAG,CAACiB,gBAAgB,CACpCC,iBAAiB,CAAElB,GAAG,CAACmB,mBAC3B,CAAC,EACL,CAAC,CAAC,QApBIlC,MAAM,CAAAG,QAAA,CAAAgC,IAAA,QAAAhC,QAAA,CAAAiC,MAAA,UAsBLpC,MAAM,CAAC,CAAC,CAAC,0BAAAG,QAAA,CAAAkC,IAAA,MAAAxC,OAAA,GACnB,kBA1BK,CAAAL,UAAUA,CAAA8C,EAAA,SAAA7C,KAAA,CAAA8C,KAAA,MAAAC,SAAA,OA0Bf,CAEDC,MAAM,CAACC,OAAO,CAAGlD,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}