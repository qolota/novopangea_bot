{"ast":null,"code":"import _regeneratorRuntime from\"/Users/germangurov/projects/wax_bot/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/germangurov/projects/wax_bot/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var fetchWithAttempts=require('../utils/fetchWithAttempts');var _require=require('../configs/ENDPOINTS'),WAX_BLOCKS_PROVIDER=_require.WAX_BLOCKS_PROVIDER;var fetchWaxData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(params){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetchWithAttempts({url:\"\".concat(WAX_BLOCKS_PROVIDER,\"/v1/chain/get_table_rows\"),options:{headers:{accept:'*/*'},body:JSON.stringify(params),method:'POST'},retries:3});case 2:data=_context.sent;if(!(data.rows.length===0)){_context.next=5;break;}return _context.abrupt(\"return\",[]);case 5:return _context.abrupt(\"return\",data.rows);case 6:case\"end\":return _context.stop();}},_callee);}));return function fetchWaxData(_x){return _ref.apply(this,arguments);};}();module.exports=fetchWaxData;","map":{"version":3,"names":["fetchWithAttempts","require","_require","WAX_BLOCKS_PROVIDER","fetchWaxData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","params","data","wrap","_callee$","_context","prev","next","url","concat","options","headers","accept","body","JSON","stringify","method","retries","sent","rows","length","abrupt","stop","_x","apply","arguments","module","exports"],"sources":["/Users/germangurov/projects/wax_bot/src/core/fetchWaxData.js"],"sourcesContent":["const fetchWithAttempts = require('../utils/fetchWithAttempts');\nconst {WAX_BLOCKS_PROVIDER} = require('../configs/ENDPOINTS');\n\nconst fetchWaxData = async (params) => {\n    const data = await fetchWithAttempts({\n      url: `${WAX_BLOCKS_PROVIDER}/v1/chain/get_table_rows`,\n      options: {\n        headers: {\n          accept: '*/*',\n        },\n        body: JSON.stringify(params),\n        method: 'POST',\n      },\n      retries: 3,\n    });\n\n    if (data.rows.length === 0) {\n      return [];\n    }\n\n    return data.rows;\n}\n\nmodule.exports = fetchWaxData;\n"],"mappings":"kQAAA,GAAM,CAAAA,iBAAiB,CAAGC,OAAO,CAAC,4BAA4B,CAAC,CAC/D,IAAAC,QAAA,CAA8BD,OAAO,CAAC,sBAAsB,CAAC,CAAtDE,mBAAmB,CAAAD,QAAA,CAAnBC,mBAAmB,CAE1B,GAAM,CAAAC,YAAY,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,MAAM,MAAAC,IAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACX,CAAAhB,iBAAiB,CAAC,CACnCiB,GAAG,IAAAC,MAAA,CAAKf,mBAAmB,4BAA0B,CACrDgB,OAAO,CAAE,CACPC,OAAO,CAAE,CACPC,MAAM,CAAE,KACV,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACd,MAAM,CAAC,CAC5Be,MAAM,CAAE,MACV,CAAC,CACDC,OAAO,CAAE,CACX,CAAC,CAAC,QAVIf,IAAI,CAAAG,QAAA,CAAAa,IAAA,MAYNhB,IAAI,CAACiB,IAAI,CAACC,MAAM,GAAK,CAAC,GAAAf,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAgB,MAAA,UACjB,EAAE,gBAAAhB,QAAA,CAAAgB,MAAA,UAGJnB,IAAI,CAACiB,IAAI,0BAAAd,QAAA,CAAAiB,IAAA,MAAAtB,OAAA,GACnB,kBAlBK,CAAAL,YAAYA,CAAA4B,EAAA,SAAA3B,IAAA,CAAA4B,KAAA,MAAAC,SAAA,OAkBjB,CAEDC,MAAM,CAACC,OAAO,CAAGhC,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}