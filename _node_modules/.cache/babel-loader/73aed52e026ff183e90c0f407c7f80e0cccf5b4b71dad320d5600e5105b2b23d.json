{"ast":null,"code":"var _=require('lodash');var convertRecources=require('./convertRecources');var RESOURCES=require('../consts/RESOURSES');var mapResources=require('./mapResources');var convertAllCosts=function convertAllCosts(_ref){var costs=_ref.costs,exchange=_ref.exchange,novoPrice=_ref.novoPrice;var _costs=_(mapResources(costs)).filter(function(c){return c.value>0;}).value();var exchangeResources=_.map(_costs,function(c){return{from:c.symbol,to:RESOURCES.OBSD,amount:c.value};});var obsdCost=convertRecources({exchange:exchange,resources:exchangeResources});var novoCost=convertRecources({exchange:exchange,resources:[{from:RESOURCES.OBSD,to:RESOURCES.NOVO,amount:obsdCost}]});var waxCost=novoCost*novoPrice;return{costs:_costs,obsdCost:obsdCost,novoCost:novoCost,waxCost:waxCost};};module.exports=convertAllCosts;","map":{"version":3,"names":["_","require","convertRecources","RESOURCES","mapResources","convertAllCosts","_ref","costs","exchange","novoPrice","_costs","filter","c","value","exchangeResources","map","from","symbol","to","OBSD","amount","obsdCost","resources","novoCost","NOVO","waxCost","module","exports"],"sources":["/Users/germangurov/projects/wax_bot/src/novopangea/utils/convertAllCosts.js"],"sourcesContent":["const _ = require('lodash');\nconst convertRecources = require('./convertRecources');\nconst RESOURCES = require('../consts/RESOURSES');\nconst mapResources = require('./mapResources');\n\nconst convertAllCosts = ({\n    costs,\n    exchange,\n    novoPrice,\n}) => {\n    const _costs = _(mapResources(costs))\n        .filter(c => c.value > 0)\n        .value();\n    const exchangeResources = _.map(_costs, c => ({\n        from: c.symbol,\n        to: RESOURCES.OBSD,\n        amount: c.value,\n    }));\n    const obsdCost = convertRecources({\n        exchange,\n        resources: exchangeResources,\n    });\n    const novoCost = convertRecources({\n        exchange,\n        resources: [{\n            from: RESOURCES.OBSD,\n            to: RESOURCES.NOVO,\n            amount: obsdCost,\n        }],\n    })\n    const waxCost = novoCost * novoPrice;\n\n    return {\n        costs: _costs,\n        obsdCost,\n        novoCost,\n        waxCost,\n    };\n};\n\nmodule.exports = convertAllCosts;"],"mappings":"AAAA,GAAM,CAAAA,CAAC,CAAGC,OAAO,CAAC,QAAQ,CAAC,CAC3B,GAAM,CAAAC,gBAAgB,CAAGD,OAAO,CAAC,oBAAoB,CAAC,CACtD,GAAM,CAAAE,SAAS,CAAGF,OAAO,CAAC,qBAAqB,CAAC,CAChD,GAAM,CAAAG,YAAY,CAAGH,OAAO,CAAC,gBAAgB,CAAC,CAE9C,GAAM,CAAAI,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAAC,IAAA,CAIf,IAHF,CAAAC,KAAK,CAAAD,IAAA,CAALC,KAAK,CACLC,QAAQ,CAAAF,IAAA,CAARE,QAAQ,CACRC,SAAS,CAAAH,IAAA,CAATG,SAAS,CAET,GAAM,CAAAC,MAAM,CAAGV,CAAC,CAACI,YAAY,CAACG,KAAK,CAAC,CAAC,CAChCI,MAAM,CAAC,SAAAC,CAAC,QAAI,CAAAA,CAAC,CAACC,KAAK,CAAG,CAAC,GAAC,CACxBA,KAAK,CAAC,CAAC,CACZ,GAAM,CAAAC,iBAAiB,CAAGd,CAAC,CAACe,GAAG,CAACL,MAAM,CAAE,SAAAE,CAAC,QAAK,CAC1CI,IAAI,CAAEJ,CAAC,CAACK,MAAM,CACdC,EAAE,CAAEf,SAAS,CAACgB,IAAI,CAClBC,MAAM,CAAER,CAAC,CAACC,KACd,CAAC,EAAC,CAAC,CACH,GAAM,CAAAQ,QAAQ,CAAGnB,gBAAgB,CAAC,CAC9BM,QAAQ,CAARA,QAAQ,CACRc,SAAS,CAAER,iBACf,CAAC,CAAC,CACF,GAAM,CAAAS,QAAQ,CAAGrB,gBAAgB,CAAC,CAC9BM,QAAQ,CAARA,QAAQ,CACRc,SAAS,CAAE,CAAC,CACRN,IAAI,CAAEb,SAAS,CAACgB,IAAI,CACpBD,EAAE,CAAEf,SAAS,CAACqB,IAAI,CAClBJ,MAAM,CAAEC,QACZ,CAAC,CACL,CAAC,CAAC,CACF,GAAM,CAAAI,OAAO,CAAGF,QAAQ,CAAGd,SAAS,CAEpC,MAAO,CACHF,KAAK,CAAEG,MAAM,CACbW,QAAQ,CAARA,QAAQ,CACRE,QAAQ,CAARA,QAAQ,CACRE,OAAO,CAAPA,OACJ,CAAC,CACL,CAAC,CAEDC,MAAM,CAACC,OAAO,CAAGtB,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}