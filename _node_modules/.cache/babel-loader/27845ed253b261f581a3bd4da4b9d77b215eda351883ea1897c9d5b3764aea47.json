{"ast":null,"code":"const _ = require('lodash');\nconst fetchAtomichub = require('../utils/fetchAtomichub');\nconst API_ENDPOINTS = require('../consts/API_ENGPOINTS');\nconst TEMPLATE_LIMIT = 100;\nconst fetchTemplates = async ({\n  params,\n  customProcessor = () => {}\n}) => {\n  let page = 1;\n  let assets = [];\n  while (true) {\n    const data = await fetchAtomichub({\n      type: API_ENDPOINTS.TEMPLATES,\n      params: {\n        limit: TEMPLATE_LIMIT,\n        order: 'desc',\n        sort: 'created',\n        page,\n        ...params\n      }\n    });\n    const pageTemplates = _(data.data).map(template => {\n      return {\n        id: template.template_id,\n        collectionName: template.collection.collection_name,\n        schemaName: template.schema.schema_name,\n        name: template.name,\n        issuedSupply: Number(template.issued_supply),\n        maxSupply: Number(template.max_supply),\n        ...customProcessor({\n          template\n        })\n      };\n    }).value();\n    assets = [...assets, ...pageTemplates];\n    if (pageTemplates.length < TEMPLATE_LIMIT) {\n      break;\n    }\n    page++;\n  }\n  return assets;\n};\nmodule.exports = fetchTemplates;","map":{"version":3,"names":["_","require","fetchAtomichub","API_ENDPOINTS","TEMPLATE_LIMIT","fetchTemplates","params","customProcessor","page","assets","data","type","TEMPLATES","limit","order","sort","pageTemplates","map","template","id","template_id","collectionName","collection","collection_name","schemaName","schema","schema_name","name","issuedSupply","Number","issued_supply","maxSupply","max_supply","value","length","module","exports"],"sources":["/Users/germangurov/projects/wax_bot/src/atomicassets/api/fetchTemplates.js"],"sourcesContent":["const _ = require('lodash');\nconst fetchAtomichub = require('../utils/fetchAtomichub');\nconst API_ENDPOINTS = require('../consts/API_ENGPOINTS');\n\nconst TEMPLATE_LIMIT = 100;\n\nconst fetchTemplates = async ({\n    params,\n    customProcessor = () => {},\n}) => {\n    let page = 1;\n  let assets = [];\n\n  while (true) {\n    const data = await fetchAtomichub({\n        type: API_ENDPOINTS.TEMPLATES,\n        params: {\n            limit: TEMPLATE_LIMIT,\n            order: 'desc',\n            sort: 'created',\n            page,\n            ...params,\n        },\n    });\n\n    const pageTemplates = _(data.data)\n        .map((template) => {\n            return {\n                id: template.template_id,\n                collectionName: template.collection.collection_name,\n                schemaName: template.schema.schema_name,\n                name: template.name,\n                issuedSupply: Number(template.issued_supply),\n                maxSupply: Number(template.max_supply),\n                ...customProcessor({\n                    template,\n                }),\n            };\n        })\n        .value();\n\n        assets = [\n            ...assets,\n            ...pageTemplates,\n        ];\n        if (pageTemplates.length < TEMPLATE_LIMIT) {\n            break;\n        }\n        page++;\n  }\n\n  return assets;\n};\n\nmodule.exports = fetchTemplates;"],"mappings":"AAAA,MAAMA,CAAC,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAC3B,MAAMC,cAAc,GAAGD,OAAO,CAAC,yBAAyB,CAAC;AACzD,MAAME,aAAa,GAAGF,OAAO,CAAC,yBAAyB,CAAC;AAExD,MAAMG,cAAc,GAAG,GAAG;AAE1B,MAAMC,cAAc,GAAG,MAAAA,CAAO;EAC1BC,MAAM;EACNC,eAAe,GAAGA,CAAA,KAAM,CAAC;AAC7B,CAAC,KAAK;EACF,IAAIC,IAAI,GAAG,CAAC;EACd,IAAIC,MAAM,GAAG,EAAE;EAEf,OAAO,IAAI,EAAE;IACX,MAAMC,IAAI,GAAG,MAAMR,cAAc,CAAC;MAC9BS,IAAI,EAAER,aAAa,CAACS,SAAS;MAC7BN,MAAM,EAAE;QACJO,KAAK,EAAET,cAAc;QACrBU,KAAK,EAAE,MAAM;QACbC,IAAI,EAAE,SAAS;QACfP,IAAI;QACJ,GAAGF;MACP;IACJ,CAAC,CAAC;IAEF,MAAMU,aAAa,GAAGhB,CAAC,CAACU,IAAI,CAACA,IAAI,CAAC,CAC7BO,GAAG,CAAEC,QAAQ,IAAK;MACf,OAAO;QACHC,EAAE,EAAED,QAAQ,CAACE,WAAW;QACxBC,cAAc,EAAEH,QAAQ,CAACI,UAAU,CAACC,eAAe;QACnDC,UAAU,EAAEN,QAAQ,CAACO,MAAM,CAACC,WAAW;QACvCC,IAAI,EAAET,QAAQ,CAACS,IAAI;QACnBC,YAAY,EAAEC,MAAM,CAACX,QAAQ,CAACY,aAAa,CAAC;QAC5CC,SAAS,EAAEF,MAAM,CAACX,QAAQ,CAACc,UAAU,CAAC;QACtC,GAAGzB,eAAe,CAAC;UACfW;QACJ,CAAC;MACL,CAAC;IACL,CAAC,CAAC,CACDe,KAAK,CAAC,CAAC;IAERxB,MAAM,GAAG,CACL,GAAGA,MAAM,EACT,GAAGO,aAAa,CACnB;IACD,IAAIA,aAAa,CAACkB,MAAM,GAAG9B,cAAc,EAAE;MACvC;IACJ;IACAI,IAAI,EAAE;EACZ;EAEA,OAAOC,MAAM;AACf,CAAC;AAED0B,MAAM,CAACC,OAAO,GAAG/B,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}