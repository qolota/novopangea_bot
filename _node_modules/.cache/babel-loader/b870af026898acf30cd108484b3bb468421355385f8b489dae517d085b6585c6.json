{"ast":null,"code":"import _regeneratorRuntime from\"/Users/germangurov/projects/wax_bot/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/germangurov/projects/wax_bot/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var fetchAllWaxData2=require('../../core/fetchAllWaxData2');var fetchExchange=require('./fetchExchange');var fetchNovoPrice=require('./fetchNovoPrice');var convertAllCosts=require('../utils/convertAllCosts');var CONTRACTS=require('../consts/CONTRACTS');var fetchLandConfigs=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref){var _ref$cache,cache,exchange,novoPrice,configs;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_ref$cache=_ref.cache,cache=_ref$cache===void 0?{}:_ref$cache;_context.t0=cache.exchange;if(_context.t0){_context.next=6;break;}_context.next=5;return fetchExchange();case 5:_context.t0=_context.sent;case 6:exchange=_context.t0;_context.t1=cache.novoPrice;if(_context.t1){_context.next=12;break;}_context.next=11;return fetchNovoPrice();case 11:_context.t1=_context.sent;case 12:novoPrice=_context.t1;_context.next=15;return fetchAllWaxData2({params:{code:CONTRACTS.GAME,scope:CONTRACTS.GAME,table:'landcfg'},customProcessor:function customProcessor(_ref3){var row=_ref3.row;return{id:row.id,plotRentAmount:convertAllCosts({costs:[row.plot_rent_amount],exchange:exchange,novoPrice:novoPrice}),rentTime:row.rent_time,workerBufferTime:row.worker_buffer_time,renewBufferTime:row.renew_buffer_time};}});case 15:configs=_context.sent;return _context.abrupt(\"return\",configs);case 17:case\"end\":return _context.stop();}},_callee);}));return function fetchLandConfigs(_x){return _ref2.apply(this,arguments);};}();module.exports=fetchLandConfigs;","map":{"version":3,"names":["fetchAllWaxData2","require","fetchExchange","fetchNovoPrice","convertAllCosts","CONTRACTS","fetchLandConfigs","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","_ref$cache","cache","exchange","novoPrice","configs","wrap","_callee$","_context","prev","next","t0","sent","t1","params","code","GAME","scope","table","customProcessor","_ref3","row","id","plotRentAmount","costs","plot_rent_amount","rentTime","rent_time","workerBufferTime","worker_buffer_time","renewBufferTime","renew_buffer_time","abrupt","stop","_x","apply","arguments","module","exports"],"sources":["/Users/germangurov/projects/wax_bot/src/novopangea/api/fetchLandConfigs.js"],"sourcesContent":["const fetchAllWaxData2 = require('../../core/fetchAllWaxData2');\nconst fetchExchange = require('./fetchExchange');\nconst fetchNovoPrice = require('./fetchNovoPrice');\nconst convertAllCosts = require('../utils/convertAllCosts');\nconst CONTRACTS = require('../consts/CONTRACTS');\n\nconst fetchLandConfigs = async ({\n    cache = {},\n}) => {\n    const exchange = cache.exchange || await fetchExchange();\n    const novoPrice = cache.novoPrice || await fetchNovoPrice();\n    const configs = await fetchAllWaxData2({\n        params: {\n            code: CONTRACTS.GAME,\n            scope: CONTRACTS.GAME,\n            table: 'landcfg',\n        },\n        customProcessor: ({row}) => ({\n            id: row.id,\n            plotRentAmount: convertAllCosts({\n                costs: [row.plot_rent_amount],\n                exchange,\n                novoPrice,\n            }),\n            rentTime: row.rent_time,\n            workerBufferTime: row.worker_buffer_time,\n            renewBufferTime: row.renew_buffer_time,\n        }),\n    });\n\n    return configs;\n};\n\nmodule.exports = fetchLandConfigs;"],"mappings":"kQAAA,GAAM,CAAAA,gBAAgB,CAAGC,OAAO,CAAC,6BAA6B,CAAC,CAC/D,GAAM,CAAAC,aAAa,CAAGD,OAAO,CAAC,iBAAiB,CAAC,CAChD,GAAM,CAAAE,cAAc,CAAGF,OAAO,CAAC,kBAAkB,CAAC,CAClD,GAAM,CAAAG,eAAe,CAAGH,OAAO,CAAC,0BAA0B,CAAC,CAC3D,GAAM,CAAAI,SAAS,CAAGJ,OAAO,CAAC,qBAAqB,CAAC,CAEhD,GAAM,CAAAK,gBAAgB,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAAC,IAAA,MAAAC,UAAA,CAAAC,KAAA,CAAAC,QAAA,CAAAC,SAAA,CAAAC,OAAA,QAAAR,mBAAA,GAAAS,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAT,UAAA,CAAAD,IAAA,CACrBE,KAAK,CAALA,KAAK,CAAAD,UAAA,UAAG,CAAC,CAAC,CAAAA,UAAA,CAAAO,QAAA,CAAAG,EAAA,CAEOT,KAAK,CAACC,QAAQ,IAAAK,QAAA,CAAAG,EAAA,EAAAH,QAAA,CAAAE,IAAA,UAAAF,QAAA,CAAAE,IAAA,SAAU,CAAApB,aAAa,CAAC,CAAC,QAAAkB,QAAA,CAAAG,EAAA,CAAAH,QAAA,CAAAI,IAAA,QAAlDT,QAAQ,CAAAK,QAAA,CAAAG,EAAA,CAAAH,QAAA,CAAAK,EAAA,CACIX,KAAK,CAACE,SAAS,IAAAI,QAAA,CAAAK,EAAA,EAAAL,QAAA,CAAAE,IAAA,WAAAF,QAAA,CAAAE,IAAA,UAAU,CAAAnB,cAAc,CAAC,CAAC,SAAAiB,QAAA,CAAAK,EAAA,CAAAL,QAAA,CAAAI,IAAA,SAArDR,SAAS,CAAAI,QAAA,CAAAK,EAAA,CAAAL,QAAA,CAAAE,IAAA,UACO,CAAAtB,gBAAgB,CAAC,CACnC0B,MAAM,CAAE,CACJC,IAAI,CAAEtB,SAAS,CAACuB,IAAI,CACpBC,KAAK,CAAExB,SAAS,CAACuB,IAAI,CACrBE,KAAK,CAAE,SACX,CAAC,CACDC,eAAe,CAAE,SAAAA,gBAAAC,KAAA,KAAE,CAAAC,GAAG,CAAAD,KAAA,CAAHC,GAAG,OAAO,CACzBC,EAAE,CAAED,GAAG,CAACC,EAAE,CACVC,cAAc,CAAE/B,eAAe,CAAC,CAC5BgC,KAAK,CAAE,CAACH,GAAG,CAACI,gBAAgB,CAAC,CAC7BtB,QAAQ,CAARA,QAAQ,CACRC,SAAS,CAATA,SACJ,CAAC,CAAC,CACFsB,QAAQ,CAAEL,GAAG,CAACM,SAAS,CACvBC,gBAAgB,CAAEP,GAAG,CAACQ,kBAAkB,CACxCC,eAAe,CAAET,GAAG,CAACU,iBACzB,CAAC,EACL,CAAC,CAAC,SAjBI1B,OAAO,CAAAG,QAAA,CAAAI,IAAA,QAAAJ,QAAA,CAAAwB,MAAA,UAmBN3B,OAAO,2BAAAG,QAAA,CAAAyB,IAAA,MAAAlC,OAAA,GACjB,kBAzBK,CAAAL,gBAAgBA,CAAAwC,EAAA,SAAAvC,KAAA,CAAAwC,KAAA,MAAAC,SAAA,OAyBrB,CAEDC,MAAM,CAACC,OAAO,CAAG5C,gBAAgB"},"metadata":{},"sourceType":"module","externalDependencies":[]}