{"ast":null,"code":"const _ = require('lodash');\nconst convertRecources = require('./convertRecources');\nconst RESOURCES = require('../consts/RESOURSES');\nconst mapResources = require('./mapResources');\nconst convertAllCosts = ({\n  costs,\n  exchange,\n  novoPrice\n}) => {\n  const _costs = _(mapResources(costs)).filter(c => c.value > 0).value();\n  const exchangeResources = _.map(_costs, c => ({\n    from: c.symbol,\n    to: RESOURCES.OBSD,\n    amount: c.value\n  }));\n  const obsdCost = convertRecources({\n    exchange,\n    resources: exchangeResources\n  });\n  const novoCost = convertRecources({\n    exchange,\n    resources: [{\n      from: RESOURCES.OBSD,\n      to: RESOURCES.NOVO,\n      amount: obsdCost\n    }]\n  });\n  const waxCost = novoCost * novoPrice;\n  return {\n    costs: _costs,\n    obsdCost,\n    novoCost,\n    waxCost\n  };\n};\nmodule.exports = convertAllCosts;","map":{"version":3,"names":["_","require","convertRecources","RESOURCES","mapResources","convertAllCosts","costs","exchange","novoPrice","_costs","filter","c","value","exchangeResources","map","from","symbol","to","OBSD","amount","obsdCost","resources","novoCost","NOVO","waxCost","module","exports"],"sources":["/Users/germangurov/projects/wax_bot/src/novopangea/utils/convertAllCosts.js"],"sourcesContent":["const _ = require('lodash');\nconst convertRecources = require('./convertRecources');\nconst RESOURCES = require('../consts/RESOURSES');\nconst mapResources = require('./mapResources');\n\nconst convertAllCosts = ({\n    costs,\n    exchange,\n    novoPrice,\n}) => {\n    const _costs = _(mapResources(costs))\n        .filter(c => c.value > 0)\n        .value();\n    const exchangeResources = _.map(_costs, c => ({\n        from: c.symbol,\n        to: RESOURCES.OBSD,\n        amount: c.value,\n    }));\n    const obsdCost = convertRecources({\n        exchange,\n        resources: exchangeResources,\n    });\n    const novoCost = convertRecources({\n        exchange,\n        resources: [{\n            from: RESOURCES.OBSD,\n            to: RESOURCES.NOVO,\n            amount: obsdCost,\n        }],\n    })\n    const waxCost = novoCost * novoPrice;\n\n    return {\n        costs: _costs,\n        obsdCost,\n        novoCost,\n        waxCost,\n    };\n};\n\nmodule.exports = convertAllCosts;"],"mappings":"AAAA,MAAMA,CAAC,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAC3B,MAAMC,gBAAgB,GAAGD,OAAO,CAAC,oBAAoB,CAAC;AACtD,MAAME,SAAS,GAAGF,OAAO,CAAC,qBAAqB,CAAC;AAChD,MAAMG,YAAY,GAAGH,OAAO,CAAC,gBAAgB,CAAC;AAE9C,MAAMI,eAAe,GAAGA,CAAC;EACrBC,KAAK;EACLC,QAAQ;EACRC;AACJ,CAAC,KAAK;EACF,MAAMC,MAAM,GAAGT,CAAC,CAACI,YAAY,CAACE,KAAK,CAAC,CAAC,CAChCI,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,KAAK,GAAG,CAAC,CAAC,CACxBA,KAAK,CAAC,CAAC;EACZ,MAAMC,iBAAiB,GAAGb,CAAC,CAACc,GAAG,CAACL,MAAM,EAAEE,CAAC,KAAK;IAC1CI,IAAI,EAAEJ,CAAC,CAACK,MAAM;IACdC,EAAE,EAAEd,SAAS,CAACe,IAAI;IAClBC,MAAM,EAAER,CAAC,CAACC;EACd,CAAC,CAAC,CAAC;EACH,MAAMQ,QAAQ,GAAGlB,gBAAgB,CAAC;IAC9BK,QAAQ;IACRc,SAAS,EAAER;EACf,CAAC,CAAC;EACF,MAAMS,QAAQ,GAAGpB,gBAAgB,CAAC;IAC9BK,QAAQ;IACRc,SAAS,EAAE,CAAC;MACRN,IAAI,EAAEZ,SAAS,CAACe,IAAI;MACpBD,EAAE,EAAEd,SAAS,CAACoB,IAAI;MAClBJ,MAAM,EAAEC;IACZ,CAAC;EACL,CAAC,CAAC;EACF,MAAMI,OAAO,GAAGF,QAAQ,GAAGd,SAAS;EAEpC,OAAO;IACHF,KAAK,EAAEG,MAAM;IACbW,QAAQ;IACRE,QAAQ;IACRE;EACJ,CAAC;AACL,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGrB,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}