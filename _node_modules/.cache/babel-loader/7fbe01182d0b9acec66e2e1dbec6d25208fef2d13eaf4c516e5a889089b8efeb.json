{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst Asset_1 = __importDefault(require(\"./Asset\"));\nclass RpcOffer {\n  constructor(api, id, data, senderAssets, receiverAssets, cache = true) {\n    this.api = api;\n    this.id = id;\n    this._data = new Promise(async (resolve, reject) => {\n      if (data) {\n        resolve(data);\n      } else {\n        try {\n          resolve(await this.api.queue.fetchOffer(id, cache));\n        } catch (e) {\n          reject(e);\n        }\n      }\n    });\n    this._senderAssets = new Promise(async (resolve, reject) => {\n      if (senderAssets) {\n        resolve(senderAssets);\n      } else {\n        try {\n          const row = await this._data;\n          const inventory = await this.api.queue.fetchAccountAssets(row.sender);\n          return resolve(row.sender_asset_ids.map(assetID => {\n            const asset = inventory.find(assetRow => assetRow.asset_id === assetID);\n            return asset ? new Asset_1.default(this.api, row.sender, assetID, asset, undefined, undefined, undefined, cache) : assetID;\n          }));\n        } catch (e) {\n          return reject(e);\n        }\n      }\n    });\n    this._recipientAssets = new Promise(async (resolve, reject) => {\n      if (receiverAssets) {\n        resolve(receiverAssets);\n      } else {\n        try {\n          const row = await this._data;\n          const inventory = await this.api.queue.fetchAccountAssets(row.recipient);\n          return resolve(row.recipient_asset_ids.map(assetID => {\n            const asset = inventory.find(assetRow => assetRow.asset_id === assetID);\n            return asset ? new Asset_1.default(this.api, row.recipient, assetID, asset, undefined, undefined, undefined, cache) : assetID;\n          }));\n        } catch (e) {\n          return reject(e);\n        }\n      }\n    });\n  }\n  async sender() {\n    return (await this._data).sender;\n  }\n  async recipient() {\n    return (await this._data).recipient;\n  }\n  async senderAssets() {\n    return await this._senderAssets;\n  }\n  async recipientAssets() {\n    return await this._recipientAssets;\n  }\n  async memo() {\n    return (await this._data).memo;\n  }\n  async toObject() {\n    return {\n      offer_id: this.id,\n      sender: {\n        account: await this.sender(),\n        assets: await Promise.all((await this.senderAssets()).map(async asset => typeof asset === 'string' ? asset : await asset.toObject()))\n      },\n      recipient: {\n        account: await this.recipient(),\n        assets: await Promise.all((await this.recipientAssets()).map(async asset => typeof asset === 'string' ? asset : await asset.toObject()))\n      },\n      memo: await this.memo()\n    };\n  }\n}\nexports.default = RpcOffer;","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","Asset_1","require","RpcOffer","constructor","api","id","data","senderAssets","receiverAssets","cache","_data","Promise","resolve","reject","queue","fetchOffer","e","_senderAssets","row","inventory","fetchAccountAssets","sender","sender_asset_ids","map","assetID","asset","find","assetRow","asset_id","default","undefined","_recipientAssets","recipient","recipient_asset_ids","recipientAssets","memo","toObject","offer_id","account","assets","all"],"sources":["/Users/germangurov/projects/wax_bot/node_modules/atomicassets/build/API/Rpc/Offer.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Asset_1 = __importDefault(require(\"./Asset\"));\nclass RpcOffer {\n    constructor(api, id, data, senderAssets, receiverAssets, cache = true) {\n        this.api = api;\n        this.id = id;\n        this._data = new Promise(async (resolve, reject) => {\n            if (data) {\n                resolve(data);\n            }\n            else {\n                try {\n                    resolve(await this.api.queue.fetchOffer(id, cache));\n                }\n                catch (e) {\n                    reject(e);\n                }\n            }\n        });\n        this._senderAssets = new Promise(async (resolve, reject) => {\n            if (senderAssets) {\n                resolve(senderAssets);\n            }\n            else {\n                try {\n                    const row = await this._data;\n                    const inventory = await this.api.queue.fetchAccountAssets(row.sender);\n                    return resolve(row.sender_asset_ids.map((assetID) => {\n                        const asset = inventory.find((assetRow) => assetRow.asset_id === assetID);\n                        return asset ? new Asset_1.default(this.api, row.sender, assetID, asset, undefined, undefined, undefined, cache) : assetID;\n                    }));\n                }\n                catch (e) {\n                    return reject(e);\n                }\n            }\n        });\n        this._recipientAssets = new Promise(async (resolve, reject) => {\n            if (receiverAssets) {\n                resolve(receiverAssets);\n            }\n            else {\n                try {\n                    const row = await this._data;\n                    const inventory = await this.api.queue.fetchAccountAssets(row.recipient);\n                    return resolve(row.recipient_asset_ids.map((assetID) => {\n                        const asset = inventory.find((assetRow) => assetRow.asset_id === assetID);\n                        return asset ? new Asset_1.default(this.api, row.recipient, assetID, asset, undefined, undefined, undefined, cache) : assetID;\n                    }));\n                }\n                catch (e) {\n                    return reject(e);\n                }\n            }\n        });\n    }\n    async sender() {\n        return (await this._data).sender;\n    }\n    async recipient() {\n        return (await this._data).recipient;\n    }\n    async senderAssets() {\n        return await this._senderAssets;\n    }\n    async recipientAssets() {\n        return await this._recipientAssets;\n    }\n    async memo() {\n        return (await this._data).memo;\n    }\n    async toObject() {\n        return {\n            offer_id: this.id,\n            sender: {\n                account: await this.sender(),\n                assets: await Promise.all((await this.senderAssets()).map(async (asset) => typeof asset === 'string' ? asset : await asset.toObject()))\n            },\n            recipient: {\n                account: await this.recipient(),\n                assets: await Promise.all((await this.recipientAssets()).map(async (asset) => typeof asset === 'string' ? asset : await asset.toObject()))\n            },\n            memo: await this.memo()\n        };\n    }\n}\nexports.default = RpcOffer;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}