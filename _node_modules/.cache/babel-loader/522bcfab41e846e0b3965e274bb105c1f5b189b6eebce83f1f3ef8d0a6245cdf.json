{"ast":null,"code":"const fetchAllWaxData2 = require('../../core/fetchAllWaxData2');\nconst CONTRACTS = require('../consts/CONTRACTS');\nconst fetchExchange = require('./fetchExchange');\nconst fetchNovoPrice = require('./fetchNovoPrice');\nconst convertAllCosts = require('../utils/convertAllCosts');\nconst fetchBuildingConfigs = async ({\n  cache = {}\n}) => {\n  const exchange = cache.exchange || (await fetchExchange());\n  const novoPrice = cache.novoPrice || (await fetchNovoPrice());\n  const buildingConfigs = await fetchAllWaxData2({\n    params: {\n      code: CONTRACTS.GAME,\n      scope: CONTRACTS.GAME,\n      table: \"buildingcfg\"\n    },\n    customProcessor: ({\n      row\n    }) => ({\n      id: row.id,\n      level: row.level,\n      resourceType: row.resource_type,\n      workerCapacity: row.worker_capacity,\n      restTime: row.rest_time,\n      minimumWage: convertAllCosts({\n        costs: [row.minimum_wage],\n        exchange,\n        novoPrice\n      }),\n      shiftCost: convertAllCosts({\n        costs: row.shift_cost,\n        exchange,\n        novoPrice\n      }),\n      shiftYield: convertAllCosts({\n        costs: row.shift_yield,\n        exchange,\n        novoPrice\n      })\n    })\n  });\n  return buildingConfigs;\n};\nmodule.exports = fetchBuildingConfigs;","map":{"version":3,"names":["fetchAllWaxData2","require","CONTRACTS","fetchExchange","fetchNovoPrice","convertAllCosts","fetchBuildingConfigs","cache","exchange","novoPrice","buildingConfigs","params","code","GAME","scope","table","customProcessor","row","id","level","resourceType","resource_type","workerCapacity","worker_capacity","restTime","rest_time","minimumWage","costs","minimum_wage","shiftCost","shift_cost","shiftYield","shift_yield","module","exports"],"sources":["/Users/germangurov/projects/wax_bot/src/novopangea/api/fetchBuildingConfigs.js"],"sourcesContent":["const fetchAllWaxData2 = require('../../core/fetchAllWaxData2');\nconst CONTRACTS = require('../consts/CONTRACTS');\nconst fetchExchange = require('./fetchExchange');\nconst fetchNovoPrice = require('./fetchNovoPrice');\nconst convertAllCosts = require('../utils/convertAllCosts');\n\nconst fetchBuildingConfigs = async ({\n    cache = {}\n}) => {\n    const exchange = cache.exchange || await fetchExchange();\n    const novoPrice = cache.novoPrice || await fetchNovoPrice();\n    const buildingConfigs = await fetchAllWaxData2({\n        params: {\n            code: CONTRACTS.GAME,\n            scope: CONTRACTS.GAME,\n            table: \"buildingcfg\",\n        },\n        customProcessor: ({row}) => ({\n            id: row.id,\n            level: row.level,\n            resourceType: row.resource_type,\n            workerCapacity: row.worker_capacity,\n            restTime: row.rest_time,\n            minimumWage: convertAllCosts({\n                costs: [row.minimum_wage],\n                exchange,\n                novoPrice,\n            }),\n            shiftCost: convertAllCosts({\n                costs: row.shift_cost,\n                exchange,\n                novoPrice,\n            }),\n            shiftYield: convertAllCosts({\n                costs: row.shift_yield,\n                exchange,\n                novoPrice,\n            }),\n        }),\n    });\n\n    return buildingConfigs;\n};\n\nmodule.exports = fetchBuildingConfigs;"],"mappings":"AAAA,MAAMA,gBAAgB,GAAGC,OAAO,CAAC,6BAA6B,CAAC;AAC/D,MAAMC,SAAS,GAAGD,OAAO,CAAC,qBAAqB,CAAC;AAChD,MAAME,aAAa,GAAGF,OAAO,CAAC,iBAAiB,CAAC;AAChD,MAAMG,cAAc,GAAGH,OAAO,CAAC,kBAAkB,CAAC;AAClD,MAAMI,eAAe,GAAGJ,OAAO,CAAC,0BAA0B,CAAC;AAE3D,MAAMK,oBAAoB,GAAG,MAAAA,CAAO;EAChCC,KAAK,GAAG,CAAC;AACb,CAAC,KAAK;EACF,MAAMC,QAAQ,GAAGD,KAAK,CAACC,QAAQ,KAAI,MAAML,aAAa,CAAC,CAAC;EACxD,MAAMM,SAAS,GAAGF,KAAK,CAACE,SAAS,KAAI,MAAML,cAAc,CAAC,CAAC;EAC3D,MAAMM,eAAe,GAAG,MAAMV,gBAAgB,CAAC;IAC3CW,MAAM,EAAE;MACJC,IAAI,EAAEV,SAAS,CAACW,IAAI;MACpBC,KAAK,EAAEZ,SAAS,CAACW,IAAI;MACrBE,KAAK,EAAE;IACX,CAAC;IACDC,eAAe,EAAEA,CAAC;MAACC;IAAG,CAAC,MAAM;MACzBC,EAAE,EAAED,GAAG,CAACC,EAAE;MACVC,KAAK,EAAEF,GAAG,CAACE,KAAK;MAChBC,YAAY,EAAEH,GAAG,CAACI,aAAa;MAC/BC,cAAc,EAAEL,GAAG,CAACM,eAAe;MACnCC,QAAQ,EAAEP,GAAG,CAACQ,SAAS;MACvBC,WAAW,EAAErB,eAAe,CAAC;QACzBsB,KAAK,EAAE,CAACV,GAAG,CAACW,YAAY,CAAC;QACzBpB,QAAQ;QACRC;MACJ,CAAC,CAAC;MACFoB,SAAS,EAAExB,eAAe,CAAC;QACvBsB,KAAK,EAAEV,GAAG,CAACa,UAAU;QACrBtB,QAAQ;QACRC;MACJ,CAAC,CAAC;MACFsB,UAAU,EAAE1B,eAAe,CAAC;QACxBsB,KAAK,EAAEV,GAAG,CAACe,WAAW;QACtBxB,QAAQ;QACRC;MACJ,CAAC;IACL,CAAC;EACL,CAAC,CAAC;EAEF,OAAOC,eAAe;AAC1B,CAAC;AAEDuB,MAAM,CAACC,OAAO,GAAG5B,oBAAoB"},"metadata":{},"sourceType":"module","externalDependencies":[]}